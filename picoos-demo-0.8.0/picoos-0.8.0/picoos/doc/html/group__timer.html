<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pico]OS: Timer Functions</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Timer Functions<br>
<small>
[<a class="el" href="group__userapip.html">User API: Pico Layer</a>]</small>
</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga7">HZ</a>&nbsp;&nbsp;&nbsp;(timerticks per second)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga8">POS_TIMEAFTER</a>(x, y)&nbsp;&nbsp;&nbsp;((((<a class="el" href="picoos_8h.html#a50">SJIF_t</a>)(x)) - ((<a class="el" href="picoos_8h.html#a50">SJIF_t</a>)(y))) &gt;= 0)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a58">POSTIMER_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga1">posTimerCreate</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a45">VAR_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga2">posTimerSet</a> (<a class="el" href="picoos_8h.html#a58">POSTIMER_t</a> tmr, <a class="el" href="picoos_8h.html#a55">POSSEMA_t</a> sema, <a class="el" href="picoos_8h.html#a48">UINT_t</a> waitticks, <a class="el" href="picoos_8h.html#a48">UINT_t</a> periodticks)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a45">VAR_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga3">posTimerStart</a> (<a class="el" href="picoos_8h.html#a58">POSTIMER_t</a> tmr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a45">VAR_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga4">posTimerStop</a> (<a class="el" href="picoos_8h.html#a58">POSTIMER_t</a> tmr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga5">posTimerDestroy</a> (<a class="el" href="picoos_8h.html#a58">POSTIMER_t</a> tmr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a45">VAR_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga6">posTimerFired</a> (<a class="el" href="picoos_8h.html#a58">POSTIMER_t</a> tmr)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>POSEXTERN <a class="el" href="picoos_8h.html#a51">JIF_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__timer.html#ga0">jiffies</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A timer object is a counting variable that is counted down by the system timer interrupt tick rate. If the variable reaches zero, a semaphore, that is bound to the timer, will be signaled. If the timer is in auto reload mode, the timer is restarted and will signal the semaphore again and again, depending on the period rate the timer is set to. <hr><h2>Define Documentation</h2>
<a class="anchor" name="ga7" doxytag="picoos.h::HZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HZ&nbsp;&nbsp;&nbsp;(timerticks per second)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hertz, timer ticks per second. HZ is a define that is set to the number of ticks the timer interrupt does in a second. For example, the jiffies variable is incremented HZ times per second. Also, much OS functions take timeout parameters measured in timer ticks; thus the HZ define can be taken as time base: HZ = 1 second, 10*HZ = 10s, HZ/10 = 100ms, etc. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga0">jiffies</a>, <a class="el" href="picoos_8h.html#a19">MS</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="picoos.h::POS_TIMEAFTER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POS_TIMEAFTER</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>y&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((((<a class="el" href="picoos_8h.html#a50">SJIF_t</a>)(x)) - ((<a class="el" href="picoos_8h.html#a50">SJIF_t</a>)(y))) &gt;= 0)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This macro is used to test if a specified time has expired. It handles timer variable wrap arounds correctly. The macro is used in conjunction with the jiffies variable, the current jiffies should be passed as first parameter to the macro. Example:<br>
 exptime = jiffies + HZ/2;<br>
 if (<a class="el" href="group__timer.html#ga8">POS_TIMEAFTER(jiffies, exptime)</a>) printf("500ms expired!\n"); <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga0">jiffies</a>, <a class="el" href="group__arch.html#ga5">HZ</a> </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga1" doxytag="picoos.h::posTimerCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a58">POSTIMER_t</a> posTimerCreate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timer function. Allocates a timer object. After a timer is allocated with this function, it must be set up with posTimerSet and than started with posTimerStart. <dl compact><dt><b>Returns:</b></dt><dd>handle to the new timer object. NULL is returned on error. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__feature.html#ga17">POSCFG_FEATURE_TIMER</a> must be defined to 1 to have timer support compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga2">posTimerSet</a>, <a class="el" href="group__timer.html#ga3">posTimerStart</a>, <a class="el" href="group__timer.html#ga5">posTimerDestroy</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="picoos.h::posTimerDestroy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void posTimerDestroy </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a58">POSTIMER_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tmr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timer function. Deletes a timer object and free its resources. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>tmr</em>&nbsp;</td><td>handle to the timer object. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__feature.html#ga17">POSCFG_FEATURE_TIMER</a> must be defined to 1 to have timer support compiled in. <br>
 <a class="el" href="group__feature.html#ga18">POSCFG_FEATURE_TIMERDESTROY</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga1">posTimerCreate</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="picoos.h::posTimerFired" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a45">VAR_t</a> posTimerFired </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a58">POSTIMER_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tmr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timer function. The function is used to test if a timer has fired. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>tmr</em>&nbsp;</td><td>handle to the timer object. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 when the timer has fired, otherwise 0. A negative value is returned on error. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__feature.html#ga17">POSCFG_FEATURE_TIMER</a> must be defined to 1 to have timer support compiled in. <br>
 <a class="el" href="group__feature.html#ga19">POSCFG_FEATURE_TIMERFIRED</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga1">posTimerCreate</a>, <a class="el" href="group__timer.html#ga2">posTimerSet</a>, <a class="el" href="group__timer.html#ga3">posTimerStart</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="picoos.h::posTimerSet" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a45">VAR_t</a> posTimerSet </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a58">POSTIMER_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tmr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="picoos_8h.html#a55">POSSEMA_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>sema</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="picoos_8h.html#a48">UINT_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>waitticks</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="picoos_8h.html#a48">UINT_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>periodticks</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timer function. Sets up a timer object. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>tmr</em>&nbsp;</td><td>handle to the timer object. </td></tr>
    <tr><td valign=top><em>sema</em>&nbsp;</td><td>seaphore object that shall be signaled when timer fires. </td></tr>
    <tr><td valign=top><em>waitticks</em>&nbsp;</td><td>number of initial wait ticks. The timer fires the first time when this ticks has been expired. </td></tr>
    <tr><td valign=top><em>periodticks</em>&nbsp;</td><td>After the timer has fired, it is reloaded with this value, and will fire again when this count of ticks has been expired (auto reload mode). If this value is set to zero, the timer won't be restarted (= one shot mode). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>zero on success. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__feature.html#ga17">POSCFG_FEATURE_TIMER</a> must be defined to 1 to have timer support compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga1">posTimerCreate</a>, <a class="el" href="group__timer.html#ga3">posTimerStart</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="picoos.h::posTimerStart" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a45">VAR_t</a> posTimerStart </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a58">POSTIMER_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tmr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timer function. Starts a timer. The timer will fire first time when the waitticks counter has been reached zero. If the periodticks were set, the timer will be reloaded with this value. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>tmr</em>&nbsp;</td><td>handle to the timer object. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>zero on success. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__feature.html#ga17">POSCFG_FEATURE_TIMER</a> must be defined to 1 to have timer support compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga4">posTimerStop</a>, <a class="el" href="group__timer.html#ga6">posTimerFired</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="picoos.h::posTimerStop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a45">VAR_t</a> posTimerStop </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a58">POSTIMER_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tmr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timer function. Stops a timer. The timer will no more fire. The timer can be reenabled with posTimerStart. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>tmr</em>&nbsp;</td><td>handle to the timer object. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>zero on success. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__feature.html#ga17">POSCFG_FEATURE_TIMER</a> must be defined to 1 to have timer support compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__timer.html#ga3">posTimerStart</a>, <a class="el" href="group__timer.html#ga5">posTimerDestroy</a> </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="ga0" doxytag="picoos.h::jiffies" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> POSEXTERN <a class="el" href="picoos_8h.html#a51">JIF_t</a> <a class="el" href="group__timer.html#ga0">jiffies</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Global timer variable. The jiffies counter variable is incremented <a class="el" href="group__arch.html#ga5">HZ</a> times per second. The maximum count the jiffie counter can reach until it wraps around is system dependent. <dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__feature.html#ga16">POSCFG_FEATURE_JIFFIES</a> must be defined to 1 to have jiffies support compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__arch.html#ga5">HZ</a> </dd></dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 21 20:37:32 2004 for pico]OS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
