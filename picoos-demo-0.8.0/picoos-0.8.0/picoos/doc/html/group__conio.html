<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pico]OS: Console Input / Output</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Console Input / Output<br>
<small>
[<a class="el" href="group__userapin.html">User API: Nano Layer</a>]</small>
</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga0">c_nos_keyinput</a> (<a class="el" href="picoos_8h.html#a46">UVAR_t</a> key)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga1">nosKeyGet</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a46">UVAR_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga2">nosKeyPressed</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a46">UVAR_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga3">p_putchar</a> (char c)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga4">c_nos_putcharReady</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga5">nosPrintChar</a> (char c)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga6">nosPrint</a> (const char *s)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga8">nosPrintf1</a> (const char *fmt, arg a1)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__conio.html#ga9">nosSPrintf1</a> (char *buf, const char *fmt, arg a1)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<b> Note: This API is part of the nano layer </b><p>
The nano layer supplies a set of multitasking able console I/O functions. Note that the platform port must support some basic I/O mechanisms. For console output, pico]OS calls the function <a class="el" href="group__conio.html#ga3">p_putchar</a> to output a single character. This function may fail when a transmitter FIFO ran out of space, and the function <a class="el" href="group__conio.html#ga4">c_nos_putcharReady</a> should be called when the transmitter is ready again. Input from a terminal or keyboard is fet into pico]OS by calling the function <a class="el" href="group__conio.html#ga0">c_nos_keyinput</a> or by rising the software interrupt number zero with the keycode as parameter. Not all platform ports may support console I/O, please read the port documentation for further information.<br>
 Since the nano layer supplies also a set of printf and sprintf functions, you may no more need a large runtime library in some special cases. <hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="pos_nano.h::c_nos_keyinput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void c_nos_keyinput </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a46">UVAR_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Keyboard input. This function is called by the architecture port to feed keyboard input into the nano layer. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>key</em>&nbsp;</td><td>keycode of the pressed key </td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnoscio.html#ga0">NOSCFG_FEATURE_CONIN</a> must be defined to 1 to have this function compiled in.<br>
 The alternative to the use of this function is to use software interrupt 0 to feed keyboard data into the nano layer. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga1">nosKeyGet</a>, <a class="el" href="group__conio.html#ga2">nosKeyPressed</a>, <a class="el" href="group__cfgnoscio.html#ga1">NOSCFG_CONIO_KEYBUFSIZE</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="pos_nano.h::c_nos_putcharReady" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void c_nos_putcharReady </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is the optional handshake function for <a class="el" href="group__conio.html#ga3">p_putchar</a>. The handshake function is usefull for console output over a serial line. The function <a class="el" href="group__conio.html#ga3">p_putchar</a> will fail when the transmitter FIFO is full, and the nano layer will save the last character for later transmission. The platform port should than call <a class="el" href="group__conio.html#ga4">c_nos_putcharReady</a> when the transmitter FIFO has space again (when the last character has left the output shift register); most commonly this is signalled by a hardware interrupt, that would be used to call this handshake function. <br>
 The purpose of this handshaking is to reduce CPU usage by avoiding polling on the standard output until the stdout is ready again. In the current implementation this function triggers a semaphore that wakes the task waiting for service on standard out. <br>
 Note that this function must be supplied by the architecture port; it is not callable by the user. <dl compact><dt><b>Note:</b></dt><dd>To enable this handshake function, the define <a class="el" href="group__portnlcfg.html#ga2">NOSCFG_CONOUT_HANDSHAKE</a> must be set to 1. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="pos_nano.h::nosKeyGet" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char nosKeyGet </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Wait and get the code of the next pressed key. This function blocks until the user presses a key on the keyboard and returns the code of the pressed key as result. <dl compact><dt><b>Returns:</b></dt><dd>ASCII-code of the pressed key </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnoscio.html#ga0">NOSCFG_FEATURE_CONIN</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga2">nosKeyPressed</a>, <a class="el" href="group__conio.html#ga0">c_nos_keyinput</a>, <a class="el" href="group__cfgnoscio.html#ga1">NOSCFG_CONIO_KEYBUFSIZE</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="pos_nano.h::nosKeyPressed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a46">UVAR_t</a> nosKeyPressed </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Test if a key was pressed. This function tests if a key code is available in the keyboard buffer. Even if no key is pressed yet, the function will immediately return. <dl compact><dt><b>Returns:</b></dt><dd>TRUE (nonzero) when a key code is available. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnoscio.html#ga0">NOSCFG_FEATURE_CONIN</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga1">nosKeyGet</a>, <a class="el" href="group__conio.html#ga0">c_nos_keyinput</a>, <a class="el" href="group__cfgnoscio.html#ga1">NOSCFG_CONIO_KEYBUFSIZE</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="pos_nano.h::nosPrint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void nosPrint </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Print a character string to the console or terminal. This function prints a string of characters (text) to the console. A CR/LF conversion is performed, CR is preceding each LF. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>s</em>&nbsp;</td><td>pointer to zero terminated ASCII string </td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnoscio.html#ga2">NOSCFG_FEATURE_CONOUT</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga5">nosPrintChar</a>, <a class="el" href="group__conio.html#ga3">p_putchar</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="pos_nano.h::nosPrintChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void nosPrintChar </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>c</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Print a character to the console or terminal. This function prints a single character to the console. No CR/LF conversion is performed. <dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnoscio.html#ga2">NOSCFG_FEATURE_CONOUT</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga6">nosPrint</a>, <a class="el" href="group__conio.html#ga3">p_putchar</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="pos_nano.h::nosPrintf1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void nosPrintf1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>arg&nbsp;</td>
          <td class="mdname" nowrap> <em>a1</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Print a formated character string to the console or terminal. This function acts like the usual printf function, except that it is limmited to the basic formats. The largest integer that can be displayed is of type INT_t. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>fmt</em>&nbsp;</td><td>format string </td></tr>
    <tr><td valign=top><em>a1</em>&nbsp;</td><td>first argument </td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnoscio.html#ga2">NOSCFG_FEATURE_CONOUT</a> and <a class="el" href="group__cfgnoscio.html#ga3">NOSCFG_FEATURE_PRINTF</a> must be defined to 1 to have this function compiled in.<br>
 This function is not variadic. To print strings with more than one argument, you may use the functions nosPrintf2 (2 arguments) to nosPrintf6 (6 arguments). </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga5">nosPrintChar</a>, <a class="el" href="group__conio.html#ga6">nosPrint</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="pos_nano.h::nosSPrintf1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void nosSPrintf1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>arg&nbsp;</td>
          <td class="mdname" nowrap> <em>a1</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Print a formated character string to a string buffer. This function acts like the usual sprintf function, except that it is limmited to the basic formats. The largest integer that can be displayed is of type INT_t. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>buf</em>&nbsp;</td><td>destination string buffer </td></tr>
    <tr><td valign=top><em>fmt</em>&nbsp;</td><td>format string </td></tr>
    <tr><td valign=top><em>a1</em>&nbsp;</td><td>first argument </td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnoscio.html#ga4">NOSCFG_FEATURE_SPRINTF</a> must be defined to 1 to have this function compiled in.<br>
 This function is not variadic. To print strings with more than one argument, you may use the functions nosSPrintf2 (2 arguments) to nosSPrintf6 (6 arguments). </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga8">nosPrintf1</a>, <a class="el" href="group__conio.html#ga6">nosPrint</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="pos_nano.h::p_putchar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a46">UVAR_t</a> p_putchar </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>c</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Print a character to the console or terminal. This function must be supplied by the architecture port; it is not callable by the user. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>c</em>&nbsp;</td><td>character to print out. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>This function should return nonzero (=TRUE) when the character could be printed. If the function could not print the character (e.g. the FIFO of a serial line is full), this function should return zero (=FALSE). The nano layer will try to send the character later again. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>This function must not do a CR/LF conversion, a CR must result in a simple carriage return, and a LF must result in a simple line feed without returning the carriage. <p>
If this function returns FALSE, the platform port must do a call to <a class="el" href="group__conio.html#ga4">c_nos_putcharReady</a> when it is ready again for accepting new characters. When <a class="el" href="group__portnlcfg.html#ga2">NOSCFG_CONOUT_HANDSHAKE</a> is disabled, the return value of this function is ignored. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__conio.html#ga4">c_nos_putcharReady</a>, <a class="el" href="group__conio.html#ga0">c_nos_keyinput</a> </dd></dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 21 20:37:32 2004 for pico]OS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
