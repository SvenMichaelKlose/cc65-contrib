<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pico]OS: picoos.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>picoos.h</h1><a href="picoos_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * License:  Modified BSD license, see documentation below.</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * This file is originally from the pico]OS realtime operating system</span>
00005 <span class="comment"> * (http://picoos.sourceforge.net).</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> * CVS-ID $Id: picoos.h,v 1.11 2004/03/21 19:19:36 dkuschel Exp $</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> */</span>
00010 
00208 <span class="preprocessor">#ifndef _PICOOS_H</span>
00209 <span class="preprocessor"></span><span class="preprocessor">#define _PICOOS_H</span>
00210 <span class="preprocessor"></span>
00211 
00212 <span class="preprocessor">#define POS_VER_N           0x0080</span>
00213 <span class="preprocessor"></span><span class="preprocessor">#define POS_VER_S           "0.8.0"</span>
00214 <span class="preprocessor"></span><span class="preprocessor">#define POS_COPYRIGHT       "(c) 2004, Dennis Kuschel"</span>
00215 <span class="preprocessor"></span><span class="preprocessor">#define POS_STARTUPSTRING   "pico]OS " POS_VER_S "  " POS_COPYRIGHT</span>
00216 <span class="preprocessor"></span>
00217 <span class="preprocessor">#ifndef NULL</span>
00218 <span class="preprocessor"></span><span class="preprocessor">#define NULL ((void*)0)</span>
00219 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00220 <span class="preprocessor"></span>
00221 <span class="preprocessor">#ifndef DOX</span>
00222 <span class="preprocessor"></span><span class="preprocessor">#define DOX  0</span>
00223 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00224 <span class="preprocessor"></span><span class="preprocessor">#if DOX==0</span>
00225 <span class="preprocessor"></span>
00226 <span class="preprocessor">#include &lt;<a class="code" href="port_8h.html">port.h</a>&gt;</span>
00227 <span class="preprocessor">#include &lt;<a class="code" href="poscfg_8h.html">poscfg.h</a>&gt;</span>
00228 
00229 
00230 
00231 <span class="comment">/*---------------------------------------------------------------------------</span>
00232 <span class="comment"> *  CONFIGURATION</span>
00233 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00234 
00235 <span class="comment">/* test if all needed parameters are set */</span>
00236 <span class="preprocessor">#ifndef MVAR_t</span>
00237 <span class="preprocessor"></span><span class="preprocessor">#error  MVAR_t not defined</span>
00238 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00239 <span class="preprocessor"></span><span class="preprocessor">#ifndef MVAR_BITS</span>
00240 <span class="preprocessor"></span><span class="preprocessor">#error  MVAR_BITS not defined</span>
00241 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00242 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_ALIGNMENT</span>
00243 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_ALIGNMENT not defined</span>
00244 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00245 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_MAX_PRIO_LEVEL</span>
00246 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_MAX_PRIO_LEVEL not defined</span>
00247 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00248 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_MAX_TASKS</span>
00249 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_MAX_TASKS not defined</span>
00250 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00251 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_MAX_EVENTS</span>
00252 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_MAX_EVENTS not defined</span>
00253 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00254 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_MAX_MESSAGES</span>
00255 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_MAX_MESSAGES not defined</span>
00256 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00257 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_MAX_TIMER</span>
00258 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_MAX_TIMER not defined</span>
00259 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00260 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_SOFT_MTASK</span>
00261 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_SOFT_MTASK not defined</span>
00262 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00263 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_CTXSW_COMBINE</span>
00264 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_CTXSW_COMBINE not defined</span>
00265 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00266 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_REALTIME_PRIO</span>
00267 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_REALTIME_PRIO not defined</span>
00268 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00269 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_ISR_INTERRUPTABLE</span>
00270 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_ISR_INTERRUPTABLE not defined</span>
00271 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00272 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_ROUNDROBIN</span>
00273 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_ROUNDROBIN not defined</span>
00274 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00275 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_TASKS_PER_PRIO</span>
00276 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_TASKS_PER_PRIO not defined</span>
00277 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00278 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FASTCODE</span>
00279 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FASTCODE not defined</span>
00280 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00281 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_SMALLCODE</span>
00282 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_SMALLCODE not defined</span>
00283 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00284 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_ARGCHECK</span>
00285 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_ARGCHECK not defined</span>
00286 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00287 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_MSG_MEMORY</span>
00288 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_MSG_MEMORY not defined</span>
00289 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00290 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_MSG_BUFSIZE</span>
00291 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_MSG_BUFSIZE not defined</span>
00292 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00293 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_DYNAMIC_MEMORY</span>
00294 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_DYNAMIC_MEMORY not defined</span>
00295 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00296 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_DYNAMIC_REFILL</span>
00297 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_DYNAMIC_REFILL</span>
00298 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00299 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_DYNAMIC_MEMORY != 0</span>
00300 <span class="preprocessor"></span><span class="preprocessor">#ifndef POS_MEM_ALLOC</span>
00301 <span class="preprocessor"></span><span class="preprocessor">#error  POS_MEM_ALLOC not defined</span>
00302 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00303 <span class="preprocessor"></span><span class="preprocessor">#ifndef POS_MEM_ALLOC</span>
00304 <span class="preprocessor"></span><span class="preprocessor">#error  POS_MEM_ALLOC not defined</span>
00305 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00306 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00307 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_CALLINITARCH</span>
00308 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_CALLINITARCH not defined</span>
00309 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00310 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_LOCK_USEFLAGS</span>
00311 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_LOCK_USEFLAGS not defined</span>
00312 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00313 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_LOCK_USEFLAGS != 0</span>
00314 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_LOCK_FLAGSTYPE</span>
00315 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_LOCK_FLAGSTYPE not defined</span>
00316 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00317 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00318 <span class="preprocessor"></span><span class="preprocessor">#ifndef POS_SCHED_LOCK</span>
00319 <span class="preprocessor"></span><span class="preprocessor">#error  POS_SCHED_LOCK not defined</span>
00320 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00321 <span class="preprocessor"></span><span class="preprocessor">#ifndef POS_SCHED_UNLOCK</span>
00322 <span class="preprocessor"></span><span class="preprocessor">#error  POS_SCHED_UNLOCK not defined</span>
00323 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00324 <span class="preprocessor"></span><span class="preprocessor">#ifndef HZ</span>
00325 <span class="preprocessor"></span><span class="preprocessor">#error  HZ not defined</span>
00326 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00327 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_TASKSTACKTYPE</span>
00328 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_TASKSTACKTYPE not defined</span>
00329 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00330 <span class="preprocessor"></span><span class="preprocessor">#ifndef POS_USERTASKDATA</span>
00331 <span class="preprocessor"></span><span class="preprocessor">#error  POS_USERTASKDATA not defined</span>
00332 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00333 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_YIELD</span>
00334 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_YIELD not defined</span>
00335 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00336 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_SLEEP</span>
00337 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_SLEEP not defined</span>
00338 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00339 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_EXIT</span>
00340 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_EXIT not defined</span>
00341 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00342 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_GETPRIORITY </span>
00343 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_GETPRIORITY  not defined</span>
00344 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00345 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_SETPRIORITY</span>
00346 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_SETPRIORITY not defined</span>
00347 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00348 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_SEMAPHORES</span>
00349 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_SEMAPHORES not defined</span>
00350 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00351 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_SEMADESTROY</span>
00352 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_SEMADESTROY not defined</span>
00353 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00354 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_SEMAWAIT</span>
00355 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_SEMAWAIT not defined</span>
00356 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00357 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_MUTEXES</span>
00358 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_MUTEXES not defined</span>
00359 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00360 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_MUTEXDESTROY</span>
00361 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_MUTEXDESTROY not defined</span>
00362 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00363 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_MUTEXTRYLOCK</span>
00364 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_MUTEXTRYLOCK not defined</span>
00365 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00366 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_GETTASK</span>
00367 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_GETTASK not defined</span>
00368 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00369 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_TASKUNUSED</span>
00370 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_TASKUNUSED not defined</span>
00371 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00372 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_MSGBOXES</span>
00373 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_MSGBOXES not defined</span>
00374 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00375 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_MSGWAIT</span>
00376 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_MSGWAIT not defined</span>
00377 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00378 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_INHIBITSCHED</span>
00379 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_INHIBITSCHED not defined</span>
00380 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00381 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_JIFFIES</span>
00382 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_JIFFIES not defined</span>
00383 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00384 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_TIMER</span>
00385 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_TIMER not defined</span>
00386 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00387 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_TIMERDESTROY</span>
00388 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_TIMERDESTROY not defined</span>
00389 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00390 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_TIMERFIRED</span>
00391 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_TIMERFIRED not defined</span>
00392 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00393 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_FLAGS</span>
00394 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_FLAGS not defined</span>
00395 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00396 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_FLAGDESTROY</span>
00397 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_FLAGDESTROY not defined</span>
00398 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00399 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_FLAGWAIT</span>
00400 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_FLAGWAIT not defined</span>
00401 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00402 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_SOFTINTS</span>
00403 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_SOFTINTS not defined</span>
00404 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00405 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_SOFTINTDEL</span>
00406 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_SOFTINTDEL not defined</span>
00407 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00408 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_SOFTINTERRUPTS</span>
00409 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_SOFTINTERRUPTS not defined</span>
00410 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00411 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_SOFTINTQUEUELEN</span>
00412 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_SOFTINTQUEUELEN not defined</span>
00413 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00414 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00415 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_IDLETASKHOOK</span>
00416 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_IDLETASKHOOK not defined</span>
00417 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00418 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_ERRNO</span>
00419 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_ERRNO not defined</span>
00420 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00421 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_ATOMICVAR</span>
00422 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_ATOMICVAR not defined</span>
00423 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00424 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_LISTS</span>
00425 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_LISTS not defined</span>
00426 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00427 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_LISTJOIN</span>
00428 <span class="preprocessor"></span><span class="preprocessor">#error  POSCFG_FEATURE_LISTJOIN not defined</span>
00429 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00430 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00431 <span class="preprocessor"></span>
00432 
00433 <span class="comment">/* parameter range checking */</span>
00434 <span class="preprocessor">#if (POSCFG_DYNAMIC_MEMORY != 0) &amp;&amp; (POSCFG_DYNAMIC_REFILL != 0)</span>
00435 <span class="preprocessor"></span><span class="preprocessor">#define SYS_POSTALLOCATE    1</span>
00436 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00437 <span class="preprocessor"></span><span class="preprocessor">#define SYS_POSTALLOCATE    0</span>
00438 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00439 <span class="preprocessor"></span><span class="preprocessor">#if (MVAR_BITS != 8) &amp;&amp; (MVAR_BITS != 16) &amp;&amp; (MVAR_BITS != 32)</span>
00440 <span class="preprocessor"></span><span class="preprocessor">#error MVAR_BITS must be 8, 16 or 32</span>
00441 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00442 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_MAX_PRIO_LEVEL == 0</span>
00443 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_PRIO_LEVEL must not be zero</span>
00444 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00445 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_ROUNDROBIN != 0) &amp;&amp; (POSCFG_MAX_PRIO_LEVEL &gt; MVAR_BITS)</span>
00446 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_PRIO_LEVEL must not exceed MVAR_BITS</span>
00447 <span class="preprocessor"></span><span class="preprocessor">#endif </span>
00448 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_ROUNDROBIN == 0) &amp;&amp; (POSCFG_MAX_PRIO_LEVEL &gt; (MVAR_BITS*MVAR_BITS))</span>
00449 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_PRIO_LEVEL must not exceed (MVAR_BITS * MVAR_BITS)</span>
00450 <span class="preprocessor"></span><span class="preprocessor">#endif </span>
00451 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_MAX_TASKS &lt; 2) &amp;&amp; (SYS_POSTALLOCATE == 0)</span>
00452 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_TASKS is less than 2</span>
00453 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00454 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_MAX_TASKS &gt; (POSCFG_TASKS_PER_PRIO * POSCFG_MAX_PRIO_LEVEL))</span>
00455 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_TASKS is much to big</span>
00456 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00457 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_MAX_EVENTS &lt; 1) &amp;&amp; (SYS_POSTALLOCATE == 0)</span>
00458 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_EVENTS must be at least 1</span>
00459 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00460 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_TASKS_PER_PRIO &gt; MVAR_BITS</span>
00461 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_TASKS_PER_PRIO can not exceed MVAR_BITS</span>
00462 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00463 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_TASKS_PER_PRIO &lt; 2) &amp;&amp; (POSCFG_ROUNDROBIN != 0)</span>
00464 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_TASKS_PER_PRIO must be at least 2</span>
00465 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00466 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_TASKS_PER_PRIO != 1) &amp;&amp; (POSCFG_ROUNDROBIN == 0)</span>
00467 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_TASKS_PER_PRIO must be 1 when round robin scheduling is disabled</span>
00468 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00469 <span class="preprocessor"></span><span class="preprocessor">#if ((POSCFG_TASKS_PER_PRIO % 3) == 0) || ((POSCFG_TASKS_PER_PRIO % 5) == 0)</span>
00470 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_TASKS_PER_PRIO must be 1/2/4/8/16 or 32</span>
00471 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00472 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_REALTIME_PRIO &gt;= POSCFG_MAX_PRIO_LEVEL) &amp;&amp; (POSCFG_ROUNDROBIN != 0)</span>
00473 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_REALTIME_PRIO must be less than POSCFG_MAX_PRIO_LEVEL</span>
00474 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00475 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_MSGBOXES != 0</span>
00476 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_MAX_MESSAGES &lt; 2) &amp;&amp; (SYS_POSTALLOCATE == 0)</span>
00477 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_MESSAGES must be at least 2</span>
00478 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00479 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_MSG_BUFSIZE &lt; 1</span>
00480 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MSG_BUFSIZE must be at least 1</span>
00481 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00482 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00483 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_FEATURE_TIMER != 0)</span>
00484 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_MAX_TIMER == 0) &amp;&amp; (SYS_POSTALLOCATE == 0)</span>
00485 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_MAX_TIMER must be at least 1</span>
00486 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00487 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00488 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_TASKSTACKTYPE &lt; 0) || (POSCFG_TASKSTACKTYPE &gt; 2)</span>
00489 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_TASKSTACKTYPE must be 0, 1 or 2</span>
00490 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00491 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_ALIGNMENT == 0</span>
00492 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_ALIGNMENT</span>
00493 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_ALIGNMENT  1</span>
00494 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00495 <span class="preprocessor"></span><span class="preprocessor">#if ((POSCFG_ALIGNMENT % 3) == 0) || ((POSCFG_ALIGNMENT % 5) == 0)</span>
00496 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_ALIGNMENT must be 1/2/4/8/16/32/64/128/256 etc.</span>
00497 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00498 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00499 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_SOFTINTS != 0</span>
00500 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_SOFTINTERRUPTS == 0</span>
00501 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_SOFTINTERRUPTS must be greater than 0</span>
00502 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00503 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_SOFTINTQUEUELEN &lt; 2</span>
00504 <span class="preprocessor"></span><span class="preprocessor">#error POSCFG_SOFTINTQUEUELEN must be at least 2</span>
00505 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00506 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00507 <span class="preprocessor"></span>
00508 
00509 <span class="comment">/* parameter reconfiguration */</span>
00510 <span class="preprocessor">#ifndef POSCFG_TASKCB_USERSPACE</span>
00511 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_TASKCB_USERSPACE     0</span>
00512 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00513 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_SEMAPHORES == 0</span>
00514 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_FEATURE_SEMADESTROY</span>
00515 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FEATURE_SEMADESTROY  0</span>
00516 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00517 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_FLAGS == 0</span>
00518 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_FEATURE_FLAGDESTROY</span>
00519 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FEATURE_FLAGDESTROY  0</span>
00520 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00521 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_MUTEXES == 0</span>
00522 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_FEATURE_MUTEXDESTROY</span>
00523 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FEATURE_MUTEXDESTROY  0</span>
00524 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00525 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_FEATURE_MUTEXDESTROY != 0) &amp;&amp; (POSCFG_FEATURE_SEMADESTROY == 0)</span>
00526 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_FEATURE_SEMADESTROY</span>
00527 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FEATURE_SEMADESTROY 1</span>
00528 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00529 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00530 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_FEATURE_MSGBOXES != 0) &amp;&amp; (SYS_POSTALLOCATE == 0)</span>
00531 <span class="preprocessor"></span><span class="preprocessor">#define SYS_MSGBOXEVENTS  2</span>
00532 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00533 <span class="preprocessor"></span><span class="preprocessor">#define SYS_MSGBOXEVENTS  0</span>
00534 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00535 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_FEATURE_MSGBOXES != 0) &amp;&amp; (POSCFG_FEATURE_GETTASK == 0)</span>
00536 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_FEATURE_GETTASK</span>
00537 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FEATURE_GETTASK 1</span>
00538 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00539 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_FEATURE_SEMAWAIT != 0) || (POSCFG_FEATURE_MSGWAIT != 0)</span>
00540 <span class="preprocessor"></span><span class="preprocessor">#define SYS_TASKDOUBLELINK  1</span>
00541 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00542 <span class="preprocessor"></span><span class="preprocessor">#define SYS_TASKDOUBLELINK  0</span>
00543 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00544 <span class="preprocessor"></span><span class="preprocessor">#define SYS_EVENTS_USED  \</span>
00545 <span class="preprocessor">      (POSCFG_FEATURE_MUTEXES | POSCFG_FEATURE_MSGBOXES | \</span>
00546 <span class="preprocessor">       POSCFG_FEATURE_FLAGS | POSCFG_FEATURE_LISTS)</span>
00547 <span class="preprocessor"></span><span class="preprocessor">#define SYS_FEATURE_EVENTS  (POSCFG_FEATURE_SEMAPHORES | SYS_EVENTS_USED)</span>
00548 <span class="preprocessor"></span><span class="preprocessor">#define SYS_FEATURE_EVENTFREE  (POSCFG_FEATURE_SEMADESTROY | \</span>
00549 <span class="preprocessor">          POSCFG_FEATURE_MUTEXDESTROY | POSCFG_FEATURE_FLAGDESTROY)</span>
00550 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_FEATURE_MSGBOXES != 0) &amp;&amp; (POSCFG_FEATURE_EXIT != 0)</span>
00551 <span class="preprocessor"></span><span class="preprocessor">#undef  SYS_FEATURE_EVENTFREE</span>
00552 <span class="preprocessor"></span><span class="preprocessor">#define SYS_FEATURE_EVENTFREE  1</span>
00553 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00554 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_FEATURE_LARGEJIFFIES</span>
00555 <span class="preprocessor"></span><span class="preprocessor">#if MVAR_BITS &lt; 16</span>
00556 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FEATURE_LARGEJIFFIES  1</span>
00557 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00558 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FEATURE_LARGEJIFFIES  0</span>
00559 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00560 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00561 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* DOX!=0 */</span>
00562 
00563 
00564 
00565 <span class="comment">/*---------------------------------------------------------------------------</span>
00566 <span class="comment"> *  SOME DEFINITIONS AND MACROS</span>
00567 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00568 
00569 <span class="preprocessor">#ifndef _POSCORE_C</span>
00570 <span class="preprocessor"></span><span class="preprocessor">#define POSEXTERN extern</span>
00571 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00572 <span class="preprocessor"></span><span class="preprocessor">#define POSEXTERN</span>
00573 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00574 <span class="preprocessor"></span>
00575 <span class="preprocessor">#if POSCFG_ROUNDROBIN == 0</span>
00576 <span class="preprocessor"></span><span class="preprocessor">#define SYS_TASKTABSIZE_X  MVAR_BITS</span>
00577 <span class="preprocessor"></span><span class="preprocessor">#define SYS_TASKTABSIZE_Y  ((POSCFG_MAX_PRIO_LEVEL+MVAR_BITS-1)/MVAR_BITS)</span>
00578 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00579 <span class="preprocessor"></span><span class="preprocessor">#define SYS_TASKTABSIZE_X  POSCFG_TASKS_PER_PRIO</span>
00580 <span class="preprocessor"></span><span class="preprocessor">#define SYS_TASKTABSIZE_Y  POSCFG_MAX_PRIO_LEVEL</span>
00581 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00582 <span class="preprocessor"></span>
00583 <span class="preprocessor">#define SYS_TASKSTATE (POSCFG_FEATURE_TASKUNUSED | POSCFG_FEATURE_MSGBOXES)</span>
00584 <span class="preprocessor"></span>
00585 <span class="preprocessor">#if POSCFG_LOCK_USEFLAGS != 0</span>
00586 <span class="preprocessor"></span><span class="preprocessor">#define POS_LOCKFLAGS   POSCFG_LOCK_FLAGSTYPE flags</span>
00587 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00588 <span class="preprocessor"></span><span class="preprocessor">#define POS_LOCKFLAGS   do { } while(0)</span>
00589 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00590 <span class="preprocessor"></span>
00591 <span class="preprocessor">#define POSTASKSTATE_UNUSED      0</span>
00592 <span class="preprocessor"></span><span class="preprocessor">#define POSTASKSTATE_ZOMBIE      1</span>
00593 <span class="preprocessor"></span><span class="preprocessor">#define POSTASKSTATE_ACTIVE      2</span>
00594 <span class="preprocessor"></span>
00595 <span class="preprocessor">#define INFINITE   ((UINT_t)~0)</span>
00596 <span class="preprocessor"></span>
00597 
00598 
00599 <span class="comment">/*---------------------------------------------------------------------------</span>
00600 <span class="comment"> *  ERROR CODES</span>
00601 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00602 
<a name="l00617"></a><a class="code" href="group__errcodes.html#ga0">00617</a> <span class="preprocessor">#define E_OK        0</span>
00618 <span class="preprocessor"></span>
<a name="l00620"></a><a class="code" href="group__errcodes.html#ga1">00620</a> <span class="preprocessor">#define E_FAIL      1</span>
00621 <span class="preprocessor"></span>
<a name="l00623"></a><a class="code" href="group__errcodes.html#ga2">00623</a> <span class="preprocessor">#define E_NOMEM     2</span>
00624 <span class="preprocessor"></span>
<a name="l00626"></a><a class="code" href="group__errcodes.html#ga3">00626</a> <span class="preprocessor">#define E_ARG       3</span>
00627 <span class="preprocessor"></span>
<a name="l00629"></a><a class="code" href="group__errcodes.html#ga4">00629</a> <span class="preprocessor">#define E_FORB      4</span>
00630 <span class="preprocessor"></span>
00635 <span class="comment">/*---------------------------------------------------------------------------</span>
00636 <span class="comment"> *  MACROS</span>
00637 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00638 
00644 <span class="preprocessor">#if (DOX==0) &amp;&amp; (HZ &lt;= 1000)</span>
00645 <span class="preprocessor"></span><span class="preprocessor">#define MS(msec)  (((UINT_t)(msec)&lt;(1000/HZ)) ? \</span>
00646 <span class="preprocessor">                    ((UINT_t)1) : ((UINT_t)((1L*HZ*(UINT_t)(msec))/1000)))</span>
00647 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00648"></a><a class="code" href="picoos_8h.html#a19">00648</a> <span class="preprocessor"></span><span class="preprocessor">#define MS(msec)  ((UINT_t)((1L*HZ*(UINT_t)(msec))/1000))</span>
00649 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00650 <span class="preprocessor"></span>
00651 
00652 
00653 <span class="comment">/*---------------------------------------------------------------------------</span>
00654 <span class="comment"> *  DATA TYPES</span>
00655 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00656 
<a name="l00662"></a><a class="code" href="picoos_8h.html#a45">00662</a> <span class="keyword">typedef</span> <span class="keywordtype">signed</span> <a class="code" href="group__arch.html#ga0">MVAR_t</a>     <a class="code" href="picoos_8h.html#a45">VAR_t</a>;
00663 
<a name="l00669"></a><a class="code" href="picoos_8h.html#a46">00669</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <a class="code" href="group__arch.html#ga0">MVAR_t</a>   <a class="code" href="picoos_8h.html#a46">UVAR_t</a>;
00670 
00671 <span class="preprocessor">#ifndef MINT_t</span>
00672 <span class="preprocessor"></span><span class="preprocessor">#define MINT_t int</span>
00673 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00674 <span class="preprocessor"></span>
<a name="l00681"></a><a class="code" href="picoos_8h.html#a47">00681</a> <span class="keyword">typedef</span> <span class="keywordtype">signed</span> MINT_t     <a class="code" href="picoos_8h.html#a47">INT_t</a>;
00682 
<a name="l00690"></a><a class="code" href="picoos_8h.html#a48">00690</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> MINT_t   <a class="code" href="picoos_8h.html#a48">UINT_t</a>;
00691 
00692 <span class="preprocessor">#ifndef MPTR_t</span>
00693 <span class="preprocessor"></span><span class="preprocessor">#define MPTR_t long</span>
00694 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00695 <span class="preprocessor"></span>
<a name="l00704"></a><a class="code" href="picoos_8h.html#a49">00704</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> MPTR_t   <a class="code" href="picoos_8h.html#a49">MEMPTR_t</a>;
00705 
00706 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_LARGEJIFFIES == 0)</span>
00707 <span class="preprocessor"></span>
<a name="l00708"></a><a class="code" href="picoos_8h.html#a50">00708</a> <span class="keyword">typedef</span> <a class="code" href="picoos_8h.html#a45">VAR_t</a>             <a class="code" href="picoos_8h.html#a50">SJIF_t</a>;
<a name="l00710"></a><a class="code" href="picoos_8h.html#a51">00710</a> <span class="keyword">typedef</span> <a class="code" href="picoos_8h.html#a46">UVAR_t</a>            <a class="code" href="picoos_8h.html#a51">JIF_t</a>;
00711 <span class="preprocessor">#else</span>
00712 <span class="preprocessor"></span><span class="keyword">typedef</span> <a class="code" href="picoos_8h.html#a47">INT_t</a>             <a class="code" href="picoos_8h.html#a50">SJIF_t</a>;
00713 <span class="keyword">typedef</span> <a class="code" href="picoos_8h.html#a48">UINT_t</a>            <a class="code" href="picoos_8h.html#a51">JIF_t</a>;
00714 <span class="preprocessor">#endif</span>
00715 <span class="preprocessor"></span>
<a name="l00717"></a><a class="code" href="picoos_8h.html#a52">00717</a> <span class="keyword">typedef</span> void (*<a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a>)(<span class="keywordtype">void</span>* arg);
00718 
<a name="l00720"></a><a class="code" href="picoos_8h.html#a53">00720</a> <span class="keyword">typedef</span> void (*<a class="code" href="picoos_8h.html#a53">POSINTFUNC_t</a>)(<a class="code" href="picoos_8h.html#a46">UVAR_t</a> arg);
00721 
00722 <span class="preprocessor">#if (DOX!=0) ||(POSCFG_FEATURE_IDLETASKHOOK != 0)</span>
00723 <span class="preprocessor"></span>
<a name="l00724"></a><a class="code" href="picoos_8h.html#a54">00724</a> <span class="keyword">typedef</span> void (*<a class="code" href="picoos_8h.html#a54">POSIDLEFUNC_t</a>)(<span class="keywordtype">void</span>);
00725 <span class="preprocessor">#endif</span>
00726 <span class="preprocessor"></span>
<a name="l00728"></a><a class="code" href="picoos_8h.html#a55">00728</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span>*  <a class="code" href="picoos_8h.html#a55">POSSEMA_t</a>;
00729 
<a name="l00731"></a><a class="code" href="picoos_8h.html#a56">00731</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span>*  <a class="code" href="picoos_8h.html#a56">POSMUTEX_t</a>;
00732 
<a name="l00734"></a><a class="code" href="picoos_8h.html#a57">00734</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span>*  <a class="code" href="picoos_8h.html#a57">POSFLAG_t</a>;
00735 
<a name="l00737"></a><a class="code" href="picoos_8h.html#a58">00737</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span>*  <a class="code" href="picoos_8h.html#a58">POSTIMER_t</a>;
00738 
<a name="l00740"></a><a class="code" href="picoos_8h.html#a59">00740</a> <span class="keyword">typedef</span> <span class="keyword">volatile</span> <a class="code" href="picoos_8h.html#a47">INT_t</a>  <a class="code" href="picoos_8h.html#a59">POSATOMIC_t</a>;
00741 
00742 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_LISTS != 0)</span>
00743 <span class="preprocessor"></span><span class="keyword">struct </span>POSLIST;
00744 <span class="keyword">struct </span>POSLISTHEAD {
00745   <span class="keyword">struct </span>POSLIST        *prev;
00746   <span class="keyword">struct </span>POSLIST        *next;
00747   <a class="code" href="picoos_8h.html#a48">UINT_t</a>                length;
00748   <a class="code" href="picoos_8h.html#a55">POSSEMA_t</a>             sema;
00749   <a class="code" href="picoos_8h.html#a46">UVAR_t</a>                flag;
00750 };
00751 <span class="keyword">struct </span>POSLIST {
00752   <span class="keyword">struct </span>POSLIST        *prev;
00753   <span class="keyword">struct </span>POSLIST        *next;
00754   <span class="keyword">struct </span>POSLISTHEAD    *head;
00755 };
<a name="l00759"></a><a class="code" href="picoos_8h.html#a60">00759</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>POSLIST <a class="code" href="picoos_8h.html#a60">POSLIST_t</a>;
<a name="l00763"></a><a class="code" href="picoos_8h.html#a61">00763</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>POSLISTHEAD <a class="code" href="picoos_8h.html#a61">POSLISTHEAD_t</a>;
00764 <span class="preprocessor">#endif</span>
00765 <span class="preprocessor"></span>
00766 
<a name="l00786"></a><a class="code" href="picoos_8h.html#a62">00786</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>POSTASK  *<a class="code" href="picoos_8h.html#a62">POSTASK_t</a>; <span class="comment">/* forward declaration */</span>
00787 
00788 
00789 
00790 <span class="comment">/*---------------------------------------------------------------------------</span>
00791 <span class="comment"> *  DEFINITIONS FOR GENERIC "findbit" FUNCTION  (file fbit_gen.c)</span>
00792 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00793 
00794 <span class="preprocessor">#ifndef POSCFG_FBIT_USE_LUTABLE</span>
00795 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FBIT_USE_LUTABLE  0</span>
00796 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00797 <span class="preprocessor"></span><span class="preprocessor">#if (POSCFG_FBIT_USE_LUTABLE &gt; 1) &amp;&amp; (POSCFG_ROUNDROBIN == 0)</span>
00798 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_FBIT_USE_LUTABLE</span>
00799 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_FBIT_USE_LUTABLE 1</span>
00800 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00801 <span class="preprocessor"></span><span class="preprocessor">#ifndef FINDBIT</span>
00802 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FBIT_USE_LUTABLE == 1</span>
00803 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_ROUNDROBIN == 0</span>
00804 <span class="preprocessor"></span><span class="preprocessor">#ifndef _FBIT_GEN_C</span>
00805 <span class="preprocessor"></span><span class="keyword">extern</span> <a class="code" href="picoos_8h.html#a45">VAR_t</a> <span class="keyword">const</span> p_pos_fbittbl[256];
00806 <span class="preprocessor">#endif</span>
00807 <span class="preprocessor"></span><span class="preprocessor">#define FINDBIT(x)  p_pos_fbittbl[x] </span>
00808 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00809 <span class="preprocessor"></span><a class="code" href="picoos_8h.html#a46">UVAR_t</a> <a class="code" href="group__port.html#ga1">p_pos_findbit</a>(<span class="keyword">const</span> UVAR_t bitfield, UVAR_t rrOffset);
00810 <span class="preprocessor">#define FINDBIT(x, o)  p_pos_findbit(x, o)</span>
00811 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00812 <span class="preprocessor"></span><span class="preprocessor">#elif POSCFG_FBIT_USE_LUTABLE == 2</span>
00813 <span class="preprocessor"></span><span class="preprocessor">#ifndef _FBIT_GEN_C</span>
00814 <span class="preprocessor"></span><span class="keyword">extern</span> <a class="code" href="picoos_8h.html#a45">VAR_t</a> <span class="keyword">const</span> p_pos_fbittbl_rr[8][256];
00815 <span class="preprocessor">#endif</span>
00816 <span class="preprocessor"></span><span class="preprocessor">#define FINDBIT(x, o)  p_pos_fbittbl_rr[o][x]</span>
00817 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00818 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* !FINDBIT */</span>
00819 
00820 
00821 
00822 <span class="comment">/*---------------------------------------------------------------------------</span>
00823 <span class="comment"> *  GLOBAL VARIABLES</span>
00824 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00825 
<a name="l00835"></a><a class="code" href="picoos_8h.html#a63">00835</a> POSEXTERN  <a class="code" href="picoos_8h.html#a62">POSTASK_t</a> <a class="code" href="picoos_8h.html#a63">posCurrentTask_g</a>;
00836 
<a name="l00846"></a><a class="code" href="picoos_8h.html#a64">00846</a> POSEXTERN  <a class="code" href="picoos_8h.html#a62">POSTASK_t</a> <a class="code" href="picoos_8h.html#a64">posNextTask_g</a>;
00847 
00855 <span class="preprocessor">#ifndef _POSCORE_C</span>
<a name="l00856"></a><a class="code" href="picoos_8h.html#a65">00856</a> <span class="preprocessor"></span>POSEXTERN  <a class="code" href="picoos_8h.html#a46">UVAR_t</a>    <a class="code" href="picoos_8h.html#a65">posInInterrupt_g</a>;
00857 <span class="preprocessor">#else</span>
00858 <span class="preprocessor"></span>POSEXTERN  <a class="code" href="picoos_8h.html#a46">UVAR_t</a>    <a class="code" href="picoos_8h.html#a65">posInInterrupt_g</a> = 1;
00859 <span class="preprocessor">#endif</span>
00860 <span class="preprocessor"></span>
00868 <span class="preprocessor">#ifndef _POSCORE_C</span>
<a name="l00869"></a><a class="code" href="picoos_8h.html#a66">00869</a> <span class="preprocessor"></span>POSEXTERN  <a class="code" href="picoos_8h.html#a46">UVAR_t</a>    <a class="code" href="picoos_8h.html#a66">posRunning_g</a>;
00870 <span class="preprocessor">#else</span>
00871 <span class="preprocessor"></span>POSEXTERN  <a class="code" href="picoos_8h.html#a46">UVAR_t</a>    <a class="code" href="picoos_8h.html#a66">posRunning_g</a> = 0;
00872 <span class="preprocessor">#endif</span>
00873 <span class="preprocessor"></span>
00874 
00875 <span class="preprocessor">#if DOX!=0</span>
00876 <span class="preprocessor"></span>
<a name="l00881"></a><a class="code" href="picoos_8h.html#a67">00881</a> <a class="code" href="picoos_8h.html#a45">VAR_t</a>   <a class="code" href="picoos_8h.html#a67">errno</a>;
00882 <span class="preprocessor">#endif</span>
00883 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_ERRNO != 0</span>
00884 <span class="preprocessor"></span><a class="code" href="picoos_8h.html#a45">VAR_t</a>*  _errno_p(<span class="keywordtype">void</span>);
00885 <span class="preprocessor">#define errno (*_errno_p())</span>
00886 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00887 <span class="preprocessor"></span>
00888 
00889 
00890 <span class="comment">/*---------------------------------------------------------------------------</span>
00891 <span class="comment"> *  PROTOTYPES OF INTERNAL FUNCTIONS</span>
00892 <span class="comment"> *-------------------------------------------------------------------------*/</span>
00893 
01028 <span class="comment">/* findbit  function or macro definition */</span>
01029 <span class="preprocessor">#if (DOX!=0) || (POSCFG_ROUNDROBIN == 0)</span>
01030 <span class="preprocessor"></span><span class="preprocessor">#ifdef FINDBIT</span>
01031 <span class="preprocessor"></span><span class="preprocessor">#define POS_FINDBIT(bf)          FINDBIT(bf, 0)</span>
01032 <span class="preprocessor"></span><span class="preprocessor">#define POS_FINDBIT_EX(bf, ofs)  FINDBIT(bf, 0)</span>
01033 <span class="preprocessor"></span><span class="preprocessor">#else  </span><span class="comment">/* FINDBIT */</span>
01034 <a class="code" href="picoos_8h.html#a46">UVAR_t</a> <a class="code" href="group__port.html#ga1">p_pos_findbit</a>(<span class="keyword">const</span> UVAR_t bitfield);  <span class="comment">/* arch_c.c */</span>
01035 <span class="preprocessor">#define POS_FINDBIT(bf)          p_pos_findbit(bf)</span>
01036 <span class="preprocessor"></span><span class="preprocessor">#define POS_FINDBIT_EX(bf, ofs)  p_pos_findbit(bf)</span>
01037 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* FINDBIT */</span>
01038 <span class="preprocessor">#else  </span><span class="comment">/* POSCFG_ROUNDROBIN */</span>
01039 <span class="preprocessor">#ifdef FINDBIT</span>
01040 <span class="preprocessor"></span><span class="preprocessor">#define POS_FINDBIT(bf)          FINDBIT(bf, 0)</span>
01041 <span class="preprocessor"></span><span class="preprocessor">#define POS_FINDBIT_EX(bf, ofs)  FINDBIT(bf, ofs)</span>
01042 <span class="preprocessor"></span><span class="preprocessor">#else  </span><span class="comment">/* FINDBIT */</span>
01043 <a class="code" href="picoos_8h.html#a46">UVAR_t</a> <a class="code" href="group__port.html#ga1">p_pos_findbit</a>(<span class="keyword">const</span> UVAR_t bitfield, UVAR_t rrOffset);  <span class="comment">/* arch_c.c */</span>
01044 <span class="preprocessor">#define POS_FINDBIT(bf)          p_pos_findbit(bf, 0)</span>
01045 <span class="preprocessor"></span><span class="preprocessor">#define POS_FINDBIT_EX(bf, ofs)  p_pos_findbit(bf, ofs)</span>
01046 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* FINDBIT */</span>
01047 <span class="preprocessor">#endif </span><span class="comment">/* POSCFG_ROUNDROBIN */</span>
01048 
01049 <span class="preprocessor">#if DOX!=0</span>
01050 <span class="preprocessor"></span>
01059 <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      <a class="code" href="group__port.html#ga1">p_pos_findbit</a>(<span class="keyword">const</span> UVAR_t bitfield);  
01060 
01071 <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      <a class="code" href="group__port.html#ga1">p_pos_findbit</a>(<span class="keyword">const</span> UVAR_t bitfield, UVAR_t rrOffset); 
01072 <span class="preprocessor">#endif</span>
01073 <span class="preprocessor"></span>
01074 <span class="preprocessor">#if (DOX!=0) || (POSCFG_CALLINITARCH != 0)</span>
01075 <span class="preprocessor"></span>
01086 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga2">p_pos_initArch</a>(<span class="keywordtype">void</span>);
01087 <span class="preprocessor">#endif</span>
01088 <span class="preprocessor"></span>
01089 <span class="preprocessor">#if (DOX!=0) || (POSCFG_TASKSTACKTYPE == 0)</span>
01090 <span class="preprocessor"></span>
01109 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga6">p_pos_initTask</a>(POSTASK_t task, <span class="keywordtype">void</span> *stackstart,
01110                            <a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> funcptr,
01111                            <span class="keywordtype">void</span> *funcarg);  <span class="comment">/* arch_c.c */</span>
01112 <span class="preprocessor">#endif</span>
01113 <span class="preprocessor"></span><span class="preprocessor">#if (DOX!=0) || (POSCFG_TASKSTACKTYPE == 1)</span>
01114 <span class="preprocessor"></span>
01138 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__port.html#ga6">p_pos_initTask</a>(POSTASK_t task, UINT_t stacksize,
01139                            <a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> funcptr,
01140                            <span class="keywordtype">void</span> *funcarg);  <span class="comment">/* arch_c.c */</span>
01159 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga5">p_pos_freeStack</a>(POSTASK_t task);<span class="comment">/* arch_c.c */</span>
01160 <span class="preprocessor">#endif</span>
01161 <span class="preprocessor"></span>
01162 <span class="preprocessor">#if (DOX!=0) || (POSCFG_TASKSTACKTYPE == 2)</span>
01163 <span class="preprocessor"></span>
01186 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__port.html#ga6">p_pos_initTask</a>(POSTASK_t task, <a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> funcptr,
01187                            <span class="keywordtype">void</span> *funcarg);  <span class="comment">/* arch_c.c */</span>
01188 
01205 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga5">p_pos_freeStack</a>(POSTASK_t task);<span class="comment">/* arch_c.c */</span>
01206 <span class="preprocessor">#endif</span>
01207 <span class="preprocessor"></span>
01221 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga7">p_pos_startFirstContext</a>(<span class="keywordtype">void</span>);   <span class="comment">/* arch_c.c */</span>
01222 
01237 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga8">p_pos_softContextSwitch</a>(<span class="keywordtype">void</span>);   <span class="comment">/* arch_c.c */</span>
01238 
01252 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga9">p_pos_intContextSwitch</a>(<span class="keywordtype">void</span>);    <span class="comment">/* arch_c.c */</span>
01253 
01254 
01263 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga10">c_pos_intEnter</a>(<span class="keywordtype">void</span>);            <span class="comment">/* picoos.c */</span>
01264 
01273 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga11">c_pos_intExit</a>(<span class="keywordtype">void</span>);             <span class="comment">/* picoos.c */</span>
01274 
01307 <span class="keywordtype">void</span>        <a class="code" href="group__port.html#ga12">c_pos_timerInterrupt</a>(<span class="keywordtype">void</span>);      <span class="comment">/* picoos.c */</span>
01308 
01313 <span class="comment">/*---------------------------------------------------------------------------</span>
01314 <span class="comment"> *  PROTOTYPES OF EXPORTED FUNCTIONS  (USER API)</span>
01315 <span class="comment"> *-------------------------------------------------------------------------*/</span>
01316 
01322 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_YIELD != 0)</span>
01323 <span class="preprocessor"></span>
01331 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga0">posTaskYield</a>(<span class="keywordtype">void</span>);
01332 <span class="preprocessor">#endif</span>
01333 <span class="preprocessor"></span>
01334 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_SLEEP != 0)</span>
01335 <span class="preprocessor"></span>
01349 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga1">posTaskSleep</a>(UINT_t ticks);
01350 <span class="preprocessor">#endif</span>
01351 <span class="preprocessor"></span>
01352 <span class="preprocessor">#if (DOX!=0) || (POSCFG_TASKSTACKTYPE == 0)</span>
01353 <span class="preprocessor"></span>
01369 <a class="code" href="picoos_8h.html#a62">POSTASK_t</a>   <a class="code" href="group__task.html#ga6">posTaskCreate</a>(<a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> funcptr, <span class="keywordtype">void</span> *funcarg,
01370                           VAR_t priority, <span class="keywordtype">void</span> *stackstart);
01371 
01387 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga7">posInit</a>(<a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> firstfunc, <span class="keywordtype">void</span> *funcarg, VAR_t priority,
01388                     <span class="keywordtype">void</span> *stackFirstTask, <span class="keywordtype">void</span> *stackIdleTask);
01389 <span class="preprocessor">#endif</span>
01390 <span class="preprocessor"></span><span class="preprocessor">#if (DOX!=0) || (POSCFG_TASKSTACKTYPE == 1)</span>
01391 <span class="preprocessor"></span>
01410 <a class="code" href="picoos_8h.html#a62">POSTASK_t</a>   <a class="code" href="group__task.html#ga6">posTaskCreate</a>(<a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> funcptr, <span class="keywordtype">void</span> *funcarg,
01411                           VAR_t priority, UINT_t stacksize);
01412 
01428 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga7">posInit</a>(<a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> firstfunc, <span class="keywordtype">void</span> *funcarg, VAR_t priority,
01429                     UINT_t taskStackSize, UINT_t idleStackSize);
01430 <span class="preprocessor">#endif</span>
01431 <span class="preprocessor"></span><span class="preprocessor">#if (DOX!=0) || (POSCFG_TASKSTACKTYPE == 2)</span>
01432 <span class="preprocessor"></span>
01448 <a class="code" href="picoos_8h.html#a62">POSTASK_t</a>   <a class="code" href="group__task.html#ga6">posTaskCreate</a>(<a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> funcptr, <span class="keywordtype">void</span> *funcarg,
01449                           VAR_t priority);
01450 
01464 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga7">posInit</a>(<a class="code" href="picoos_8h.html#a52">POSTASKFUNC_t</a> firstfunc, <span class="keywordtype">void</span> *funcarg, VAR_t priority);
01465 
01466 <span class="preprocessor">#endif</span>
01467 <span class="preprocessor"></span>
01468 
01469 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_EXIT != 0)</span>
01470 <span class="preprocessor"></span>
01477 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga8">posTaskExit</a>(<span class="keywordtype">void</span>);
01478 <span class="preprocessor">#endif</span>
01479 <span class="preprocessor"></span>
01480 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_GETTASK != 0)</span>
01481 <span class="preprocessor"></span>
01489 <a class="code" href="picoos_8h.html#a62">POSTASK_t</a>   <a class="code" href="group__task.html#ga9">posTaskGetCurrent</a>(<span class="keywordtype">void</span>);
01490 <span class="preprocessor">#endif</span>
01491 <span class="preprocessor"></span>
01492 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_TASKUNUSED != 0)</span>
01493 <span class="preprocessor"></span>
01506 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__task.html#ga10">posTaskUnused</a>(POSTASK_t taskhandle);
01507 <span class="preprocessor">#endif</span>
01508 <span class="preprocessor"></span>
01509 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_SETPRIORITY != 0)</span>
01510 <span class="preprocessor"></span>
01523 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__task.html#ga11">posTaskSetPriority</a>(POSTASK_t taskhandle, VAR_t priority);
01524 <span class="preprocessor">#endif</span>
01525 <span class="preprocessor"></span>
01526 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_GETPRIORITY != 0)</span>
01527 <span class="preprocessor"></span>
01536 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__task.html#ga12">posTaskGetPriority</a>(POSTASK_t taskhandle);
01537 <span class="preprocessor">#endif</span>
01538 <span class="preprocessor"></span>
01539 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_INHIBITSCHED != 0)</span>
01540 <span class="preprocessor"></span>
01551 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga13">posTaskSchedLock</a>(<span class="keywordtype">void</span>);
01552 
01562 <span class="keywordtype">void</span>        <a class="code" href="group__task.html#ga14">posTaskSchedUnlock</a>(<span class="keywordtype">void</span>);
01563 <span class="preprocessor">#endif</span>
01564 <span class="preprocessor"></span>
01565 <span class="preprocessor">#if (DOX!=0) || (POSCFG_TASKCB_USERSPACE &gt; 0)</span>
01566 <span class="preprocessor"></span>
01574 <span class="keywordtype">void</span>*       <a class="code" href="group__task.html#ga15">posTaskGetUserspace</a>(<span class="keywordtype">void</span>);
01575 <span class="preprocessor">#endif</span>
01576 <span class="preprocessor"></span>
01577 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_IDLETASKHOOK != 0)</span>
01578 <span class="preprocessor"></span>
01596 <a class="code" href="picoos_8h.html#a54">POSIDLEFUNC_t</a>  <a class="code" href="group__task.html#ga16">posInstallIdleTaskHook</a>(<a class="code" href="picoos_8h.html#a54">POSIDLEFUNC_t</a> idlefunc);
01597 <span class="preprocessor">#endif</span>
01598 <span class="preprocessor"></span>
01601 <span class="comment">/*-------------------------------------------------------------------------*/</span>
01602 
01603 <span class="preprocessor">#if (DOX!=0) || (SYS_FEATURE_EVENTS != 0)</span>
01604 <span class="preprocessor"></span>
01643 <a class="code" href="picoos_8h.html#a55">POSSEMA_t</a>   <a class="code" href="group__sema.html#ga0">posSemaCreate</a>(INT_t initcount);
01644 
01645 <span class="preprocessor">#if (DOX!=0) || (SYS_FEATURE_EVENTFREE != 0)</span>
01646 <span class="preprocessor"></span>
01656 <span class="keywordtype">void</span>        <a class="code" href="group__sema.html#ga1">posSemaDestroy</a>(POSSEMA_t sema);
01657 <span class="preprocessor">#endif</span>
01658 <span class="preprocessor"></span>
01671 <span class="preprocessor">#if (DOX!=0) || (POSCFG_SMALLCODE == 0) || (POSCFG_FEATURE_SEMAWAIT == 0)</span>
01672 <span class="preprocessor"></span><a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__sema.html#ga2">posSemaGet</a>(POSSEMA_t sema);
01673 <span class="preprocessor">#else</span>
01674 <span class="preprocessor"></span><span class="comment">/* this define is for small code and it saves stack memory */</span>
01675 <span class="preprocessor">#define     posSemaGet(sema)  posSemaWait(sema, INFINITE)</span>
01676 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
01677 <span class="preprocessor"></span>
01689 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__sema.html#ga3">posSemaSignal</a>(POSSEMA_t sema);
01690 
01691 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_SEMAWAIT != 0)</span>
01692 <span class="preprocessor"></span>
01711 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__sema.html#ga4">posSemaWait</a>(POSSEMA_t sema, UINT_t timeoutticks);
01712 <span class="preprocessor">#endif</span>
01713 <span class="preprocessor"></span>
01714 <span class="preprocessor">#endif </span><span class="comment">/* SYS_FEATURE_EVENTS */</span>
01715 
01717 <span class="comment">/*-------------------------------------------------------------------------*/</span>
01718 
01719 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_MUTEXES != 0)</span>
01720 <span class="preprocessor"></span>
01741 <a class="code" href="picoos_8h.html#a56">POSMUTEX_t</a>  <a class="code" href="group__mutex.html#ga0">posMutexCreate</a>(<span class="keywordtype">void</span>);
01742 
01743 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_MUTEXDESTROY != 0)</span>
01744 <span class="preprocessor"></span>
01754 <span class="keywordtype">void</span>        <a class="code" href="group__mutex.html#ga1">posMutexDestroy</a>(POSMUTEX_t mutex);
01755 <span class="preprocessor">#endif</span>
01756 <span class="preprocessor"></span>
01757 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_MUTEXTRYLOCK != 0)</span>
01758 <span class="preprocessor"></span>
01773 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__mutex.html#ga2">posMutexTryLock</a>(POSMUTEX_t mutex);
01774 <span class="preprocessor">#endif</span>
01775 <span class="preprocessor"></span>
01788 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__mutex.html#ga3">posMutexLock</a>(POSMUTEX_t mutex);
01789 
01800 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__mutex.html#ga4">posMutexUnlock</a>(POSMUTEX_t mutex);
01801 
01802 <span class="preprocessor">#endif </span><span class="comment">/* POSCFG_FEATURE_MUTEXES */</span>
01803 
01805 <span class="comment">/*-------------------------------------------------------------------------*/</span>
01806 
01807 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_MSGBOXES != 0)</span>
01808 <span class="preprocessor"></span>
01830 <span class="preprocessor">#if (DOX!=0) || (POSCFG_MSG_MEMORY != 0)</span>
01831 <span class="preprocessor"></span>
01844 <span class="keywordtype">void</span>*       <a class="code" href="group__msg.html#ga0">posMessageAlloc</a>(<span class="keywordtype">void</span>);
01845 
01858 <span class="keywordtype">void</span>        <a class="code" href="group__msg.html#ga1">posMessageFree</a>(<span class="keywordtype">void</span> *buf);
01859 <span class="preprocessor">#endif</span>
01860 <span class="preprocessor"></span>
01877 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__msg.html#ga2">posMessageSend</a>(<span class="keywordtype">void</span> *buf, POSTASK_t taskhandle);
01878 
01891 <span class="preprocessor">#if (DOX!=0) || (POSCFG_SMALLCODE == 0) || (POSCFG_FEATURE_MSGWAIT == 0)</span>
01892 <span class="preprocessor"></span><span class="keywordtype">void</span>*       <a class="code" href="group__msg.html#ga3">posMessageGet</a>(<span class="keywordtype">void</span>);
01893 <span class="preprocessor">#else</span>
01894 <span class="preprocessor"></span><span class="comment">/* this define is for small code and it saves stack memory */</span>
01895 <span class="preprocessor">#define     posMessageGet()  posMessageWait(INFINITE)</span>
01896 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
01897 <span class="preprocessor"></span>
01910 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__msg.html#ga4">posMessageAvailable</a>(<span class="keywordtype">void</span>);
01911 
01912 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_MSGWAIT != 0)</span>
01913 <span class="preprocessor"></span>
01935 <span class="keywordtype">void</span>*       <a class="code" href="group__msg.html#ga5">posMessageWait</a>(UINT_t timeoutticks);
01936 <span class="preprocessor">#endif</span>
01937 <span class="preprocessor"></span>
01938 <span class="preprocessor">#endif  </span><span class="comment">/* POSCFG_FEATURE_MSGBOXES */</span>
01939 
01941 <span class="comment">/*-------------------------------------------------------------------------*/</span>
01942 
01943 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_FLAGS != 0)</span>
01944 <span class="preprocessor"></span>
01964 <a class="code" href="picoos_8h.html#a57">POSFLAG_t</a>   <a class="code" href="group__flag.html#ga0">posFlagCreate</a>(<span class="keywordtype">void</span>);
01965 
01966 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_FLAGDESTROY != 0)</span>
01967 <span class="preprocessor"></span>
01977 <span class="keywordtype">void</span>        <a class="code" href="group__flag.html#ga1">posFlagDestroy</a>(POSFLAG_t flg);
01978 <span class="preprocessor">#endif</span>
01979 <span class="preprocessor"></span>
01992 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__flag.html#ga2">posFlagSet</a>(POSFLAG_t flg, UVAR_t flgnum);
01993 
02008 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__flag.html#ga3">posFlagGet</a>(POSFLAG_t flg, UVAR_t mode);
02009 
02010 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_FLAGWAIT != 0)</span>
02011 <span class="preprocessor"></span>
02030 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__flag.html#ga4">posFlagWait</a>(POSFLAG_t flg, UINT_t timeoutticks);
02031 <span class="preprocessor">#endif</span>
02032 <span class="preprocessor"></span>
02033 <span class="preprocessor">#define POSFLAG_MODE_GETSINGLE   0</span>
02034 <span class="preprocessor"></span><span class="preprocessor">#define POSFLAG_MODE_GETMASK     1</span>
02035 <span class="preprocessor"></span>
02036 <span class="preprocessor">#endif  </span><span class="comment">/* POSCFG_FEATURE_FLAGS */</span>
02037 
02039 <span class="comment">/*-------------------------------------------------------------------------*/</span>
02040 
02062 <span class="preprocessor">#if DOX!=0</span>
<a name="l02063"></a><a class="code" href="group__timer.html#ga7">02063</a> <span class="preprocessor"></span><span class="preprocessor">#define HZ (timerticks per second)</span>
02064 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02065 <span class="preprocessor"></span>
02075 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_JIFFIES != 0)</span>
02076 <span class="preprocessor"></span><span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_LARGEJIFFIES == 0)</span>
02077 <span class="preprocessor"></span>POSEXTERN  <a class="code" href="picoos_8h.html#a51">JIF_t</a>  <a class="code" href="group__timer.html#ga0">jiffies</a>;
02078 <span class="preprocessor">#else</span>
02079 <span class="preprocessor"></span><a class="code" href="picoos_8h.html#a51">JIF_t</a>       posGetJiffies(<span class="keywordtype">void</span>);
02080 <span class="preprocessor">#define jiffies  posGetJiffies()</span>
02081 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02082 <span class="preprocessor"></span>
<a name="l02093"></a><a class="code" href="group__timer.html#ga8">02093</a> <span class="preprocessor">#define POS_TIMEAFTER(x, y)    ((((SJIF_t)(x)) - ((SJIF_t)(y))) &gt;= 0)</span>
02094 <span class="preprocessor"></span>
02095 <span class="preprocessor">#endif  </span><span class="comment">/* POSCFG_FEATURE_JIFFIES */</span>
02096 
02097 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_TIMER != 0)</span>
02098 <span class="preprocessor"></span>
02108 <a class="code" href="picoos_8h.html#a58">POSTIMER_t</a>  <a class="code" href="group__timer.html#ga1">posTimerCreate</a>(<span class="keywordtype">void</span>);
02109 
02127 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__timer.html#ga2">posTimerSet</a>(POSTIMER_t tmr, POSSEMA_t sema,
02128                         UINT_t waitticks, UINT_t periodticks);
02140 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__timer.html#ga3">posTimerStart</a>(POSTIMER_t tmr);
02141 
02152 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__timer.html#ga4">posTimerStop</a>(POSTIMER_t tmr);
02153 
02154 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_TIMERDESTROY != 0)</span>
02155 <span class="preprocessor"></span>
02165 <span class="keywordtype">void</span>        <a class="code" href="group__timer.html#ga5">posTimerDestroy</a>(POSTIMER_t tmr);
02166 <span class="preprocessor">#endif</span>
02167 <span class="preprocessor"></span><span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_TIMERFIRED != 0)</span>
02168 <span class="preprocessor"></span>
02180 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__timer.html#ga6">posTimerFired</a>(POSTIMER_t tmr);
02181 <span class="preprocessor">#endif</span>
02182 <span class="preprocessor"></span>
02183 <span class="preprocessor">#endif  </span><span class="comment">/* POSCFG_FEATURE_TIMER */</span>
02184 
02186 <span class="comment">/*-------------------------------------------------------------------------*/</span>
02187 
02188 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_SOFTINTS != 0)</span>
02189 <span class="preprocessor"></span>
02235 <span class="keywordtype">void</span>        <a class="code" href="group__sint.html#ga0">posSoftInt</a>(UVAR_t intno, UVAR_t param);
02236 
02250 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__sint.html#ga1">posSoftIntSetHandler</a>(UVAR_t intno, <a class="code" href="picoos_8h.html#a53">POSINTFUNC_t</a> inthandler);
02251 
02252 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_SOFTINTDEL != 0)</span>
02253 <span class="preprocessor"></span>
02266 <a class="code" href="picoos_8h.html#a45">VAR_t</a>       <a class="code" href="group__sint.html#ga2">posSoftIntDelHandler</a>(UVAR_t intno);
02267 <span class="preprocessor">#endif</span>
02268 <span class="preprocessor"></span>
02269 <span class="preprocessor">#endif  </span><span class="comment">/* POSCFG_FEATURE_SOFTINTS */</span>
02270 
02272 <span class="comment">/*-------------------------------------------------------------------------*/</span>
02273 
02274 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_ATOMICVAR != 0)</span>
02275 <span class="preprocessor"></span>
02300 <span class="keywordtype">void</span>        <a class="code" href="group__atomic.html#ga0">posAtomicSet</a>(POSATOMIC_t *var, INT_t value);
02301 
02312 <a class="code" href="picoos_8h.html#a47">INT_t</a>       <a class="code" href="group__atomic.html#ga1">posAtomicGet</a>(POSATOMIC_t *var);
02313 
02324 <a class="code" href="picoos_8h.html#a47">INT_t</a>       <a class="code" href="group__atomic.html#ga2">posAtomicAdd</a>(POSATOMIC_t *var, INT_t value);
02325 
02336 <a class="code" href="picoos_8h.html#a47">INT_t</a>       <a class="code" href="group__atomic.html#ga3">posAtomicSub</a>(POSATOMIC_t *var, INT_t value);
02337 
02338 <span class="preprocessor">#endif </span><span class="comment">/* POSCFG_FEATURE_ATOMICVAR */</span>
02339 
02342 <span class="comment">/*-------------------------------------------------------------------------*/</span>
02343 
02344 <span class="preprocessor">#if (DOX!=0) || (POSCFG_FEATURE_LISTS != 0)</span>
02345 <span class="preprocessor"></span>
02360 <span class="preprocessor">#define POSLIST_HEAD  0</span>
02361 <span class="preprocessor"></span><span class="preprocessor">#define POSLIST_TAIL  1</span>
02362 <span class="preprocessor"></span>
02378 <span class="keywordtype">void</span>        <a class="code" href="group__lists.html#ga0">posListAdd</a>(POSLISTHEAD_t *listhead, UVAR_t pos, POSLIST_t *<span class="keyword">new</span>);
02379 
02411 <a class="code" href="picoos_8h.html#a60">POSLIST_t</a>*  <a class="code" href="group__lists.html#ga1">posListGet</a>(POSLISTHEAD_t *listhead, UVAR_t pos,
02412                        UINT_t timeout);
02413 
02422 <span class="keywordtype">void</span>        <a class="code" href="group__lists.html#ga2">posListRemove</a>(POSLIST_t *listelem);
02423 
02443 <span class="keywordtype">void</span>        <a class="code" href="group__lists.html#ga3">posListJoin</a>(POSLISTHEAD_t *baselisthead, UVAR_t pos,
02444                         POSLISTHEAD_t *joinlisthead);
02445 
02455 <a class="code" href="picoos_8h.html#a48">UINT_t</a>      <a class="code" href="group__lists.html#ga4">posListLen</a>(POSLISTHEAD_t *listhead);
02456 
02468 <span class="keywordtype">void</span>        <a class="code" href="group__lists.html#ga5">posListInit</a>(POSLISTHEAD_t *listhead);
02469 
02477 <span class="keywordtype">void</span>        <a class="code" href="group__lists.html#ga6">posListTerm</a>(POSLISTHEAD_t *listhead);
02478 
02479 <span class="preprocessor">#if (DOX!=0)</span>
02480 <span class="preprocessor"></span>
<a name="l02492"></a><a class="code" href="group__lists.html#ga9">02492</a> <span class="preprocessor">#define POSLIST_ELEMENT(elem, type, member)</span>
02493 <span class="preprocessor"></span><span class="preprocessor">#else</span>
02494 <span class="preprocessor"></span><span class="preprocessor">#define POSLIST_ELEMENT(elem, type, member) \</span>
02495 <span class="preprocessor">        ((type*)((char*)(elem)-(char*)(&amp;((type*)NULL)-&gt;member)))</span>
02496 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02497 <span class="preprocessor"></span>
<a name="l02501"></a><a class="code" href="group__lists.html#ga10">02501</a> <span class="preprocessor">#define POSLIST_IS_EMPTY(plisthead) \</span>
02502 <span class="preprocessor">          ((plisthead)-&gt;next == (POSLIST_t*)(plisthead))</span>
02503 <span class="preprocessor"></span>
<a name="l02507"></a><a class="code" href="group__lists.html#ga11">02507</a> <span class="preprocessor">#define POSLIST_NEXT_ENTRY(plist)               (plist)-&gt;next</span>
02508 <span class="preprocessor"></span>
<a name="l02512"></a><a class="code" href="group__lists.html#ga12">02512</a> <span class="preprocessor">#define POSLIST_PREV_ENTRY(plist)               (plist)-&gt;prev</span>
02513 <span class="preprocessor"></span>
<a name="l02517"></a><a class="code" href="group__lists.html#ga13">02517</a> <span class="preprocessor">#define POSLIST_FIRST_ENTRY(plisthead)          (plisthead)-&gt;next</span>
02518 <span class="preprocessor"></span>
<a name="l02522"></a><a class="code" href="group__lists.html#ga14">02522</a> <span class="preprocessor">#define POSLIST_LAST_ENTRY(plisthead)           (plisthead)-&gt;prev</span>
02523 <span class="preprocessor"></span>
<a name="l02527"></a><a class="code" href="group__lists.html#ga15">02527</a> <span class="preprocessor">#define POSLIST_IS_FIRST_ENTRY(element) ((element)-&gt;prev==(element)-&gt;head)</span>
02528 <span class="preprocessor"></span>
<a name="l02532"></a><a class="code" href="group__lists.html#ga16">02532</a> <span class="preprocessor">#define POSLIST_IS_LAST_ENTRY(element)  ((element)-&gt;next==(element)-&gt;head)</span>
02533 <span class="preprocessor"></span>
<a name="l02536"></a><a class="code" href="group__lists.html#ga17">02536</a> <span class="preprocessor">#define POSLIST_IS_END(plisthead, element) \</span>
02537 <span class="preprocessor">          ((element)==(POSLIST_t*)(plisthead))</span>
02538 <span class="preprocessor"></span>
02539 
02540 <span class="preprocessor">#if (DOX!=0)</span>
02541 <span class="preprocessor"></span>
<a name="l02557"></a><a class="code" href="group__lists.html#ga18">02557</a> <span class="preprocessor">#define POSLIST_FOR_EACH_ENTRY(plisthead, runvar)</span>
02558 <span class="preprocessor"></span><span class="preprocessor">#else</span>
02559 <span class="preprocessor"></span><span class="preprocessor">#define POSLIST_FOR_EACH_ENTRY(plisthead, runvar) \</span>
02560 <span class="preprocessor">  for (runvar = POSLIST_FIRST_ENTRY(plisthead);   \</span>
02561 <span class="preprocessor">       !POSLIST_IS_END(plisthead, runvar);        \</span>
02562 <span class="preprocessor">       runvar = POSLIST_NEXT_ENTRY(runvar))</span>
02563 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02564 <span class="preprocessor"></span>
02565 <span class="preprocessor">#if (DOX!=0)</span>
02566 <span class="preprocessor"></span>
<a name="l02587"></a><a class="code" href="group__lists.html#ga19">02587</a> <span class="preprocessor">#define POSLIST_FOREACH_BEGIN(plisthead, runvar, type, listmember)</span>
02588 <span class="preprocessor"></span><span class="preprocessor">#else</span>
02589 <span class="preprocessor"></span><span class="preprocessor">#define POSLIST_FOREACH_BEGIN(plisthead, runvar, type, listmember) \</span>
02590 <span class="preprocessor">  do { POSLIST_t *r, *n; \</span>
02591 <span class="preprocessor">    for (r = POSLIST_FIRST_ENTRY(plisthead); \</span>
02592 <span class="preprocessor">         !POSLIST_IS_END(plisthead, r); r = n) { \</span>
02593 <span class="preprocessor">         n = POSLIST_NEXT_ENTRY(r); \</span>
02594 <span class="preprocessor">      runvar = POSLIST_ELEMENT(r, type, listmember);</span>
02595 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02596 <span class="preprocessor"></span>
02597 <span class="preprocessor">#if (DOX!=0)</span>
02598 <span class="preprocessor"></span>
<a name="l02604"></a><a class="code" href="group__lists.html#ga20">02604</a> <span class="preprocessor">#define POSLIST_FOREACH_END</span>
02605 <span class="preprocessor"></span><span class="preprocessor">#else</span>
02606 <span class="preprocessor"></span><span class="preprocessor">#define POSLIST_FOREACH_END \</span>
02607 <span class="preprocessor">  } } while(0)</span>
02608 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02609 <span class="preprocessor"></span>
02610 <span class="preprocessor">#endif </span><span class="comment">/* POSCFG_FEATURE_LISTS */</span>
02611 
02614 <span class="comment">/* ==== END OF USER API ==== */</span>
02615 
02616 
02617 
02618 <span class="comment">/*---------------------------------------------------------------------------</span>
02619 <span class="comment"> *  INTERNAL DEFINITIONS</span>
02620 <span class="comment"> *-------------------------------------------------------------------------*/</span>
02621 
02622 <span class="preprocessor">#ifdef PICOS_PRIVINCL</span>
02623 <span class="preprocessor"></span>
02624 <span class="preprocessor">#if MVAR_BITS == 8</span>
02625 <span class="preprocessor"></span><span class="preprocessor">#ifndef _POSCORE_C</span>
02626 <span class="preprocessor"></span>POSEXTERN <a class="code" href="picoos_8h.html#a46">UVAR_t</a> posShift1lTab_g[8];
02627 <span class="preprocessor">#endif</span>
02628 <span class="preprocessor"></span><span class="preprocessor">#define pos_shift1l(bits)   posShift1lTab_g[(UVAR_t)(bits)]</span>
02629 <span class="preprocessor"></span><span class="preprocessor">#else</span>
02630 <span class="preprocessor"></span><span class="preprocessor">#define pos_shift1l(bits)   (((UVAR_t)1)&lt;&lt;(bits))</span>
02631 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02632 <span class="preprocessor"></span>
02633 <span class="preprocessor">#endif </span><span class="comment">/* PICOS_PRIV_H */</span>
02634 
02635 <span class="comment">/*-------------------------------------------------------------------------*/</span>
02636 
02637 <span class="comment">/* include the header of the nano layer */</span>
02638 
02639 <span class="preprocessor">#ifdef POSNANO</span>
02640 <span class="preprocessor"></span><span class="preprocessor">#ifdef POSCFG_ENABLE_NANO</span>
02641 <span class="preprocessor"></span><span class="preprocessor">#undef POSCFG_ENABLE_NANO</span>
02642 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02643 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_ENABLE_NANO  1</span>
02644 <span class="preprocessor"></span><span class="preprocessor">#else</span>
02645 <span class="preprocessor"></span><span class="preprocessor">#ifndef POSCFG_ENABLE_NANO</span>
02646 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_ENABLE_NANO  0</span>
02647 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02648 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02649 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_ENABLE_NANO != 0</span>
02650 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="pos__nano_8h.html">pos_nano.h</a>&gt;</span>
02651 <span class="preprocessor">#endif</span>
02652 <span class="preprocessor"></span>
02653 <span class="comment">/*-------------------------------------------------------------------------*/</span>
02654 
02655 <span class="comment">/* defaults for hooks */</span>
02656 
02657 <span class="preprocessor">#ifndef POSCFG_STKFREE_HOOK</span>
02658 <span class="preprocessor"></span><span class="preprocessor">#define POSCFG_STKFREE_HOOK  0</span>
02659 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02660 <span class="preprocessor"></span>
02661 <span class="comment">/*-------------------------------------------------------------------------*/</span>
02662 
02663 <span class="comment">/* fully define the task structure */</span>
02664 
02665 <span class="preprocessor">#ifndef NOS_TASKDATA</span>
02666 <span class="preprocessor"></span><span class="preprocessor">#define NOS_TASKDATA</span>
02667 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02668 <span class="preprocessor"></span>
02669 <span class="preprocessor">#if POSCFG_STKFREE_HOOK != 0</span>
02670 <span class="preprocessor"></span><span class="keyword">typedef</span> void (*POSSTKFREEFUNC_t)(<a class="code" href="picoos_8h.html#a62">POSTASK_t</a> task);
02671 <span class="preprocessor">#endif</span>
02672 <span class="preprocessor"></span>
02673 <span class="keyword">struct </span>POSTASK {
02674     <a class="code" href="port_8h.html#a21">POS_USERTASKDATA</a>
02675     NOS_TASKDATA
02676 <span class="preprocessor">#if POSCFG_TASKCB_USERSPACE &gt; 0</span>
02677 <span class="preprocessor"></span>    <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      usrspace[(<a class="code" href="group__coreset.html#ga10">POSCFG_TASKCB_USERSPACE</a> + <a class="code" href="group__arch.html#ga3">POSCFG_ALIGNMENT</a> +
02678                          <span class="keyword">sizeof</span>(<a class="code" href="picoos_8h.html#a46">UVAR_t</a>)-2) / <span class="keyword">sizeof</span>(<a class="code" href="picoos_8h.html#a46">UVAR_t</a>)];
02679 <span class="preprocessor">#endif</span>
02680 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_STKFREE_HOOK != 0</span>
02681 <span class="preprocessor"></span>    POSSTKFREEFUNC_t  stkfree;
02682 <span class="preprocessor">#endif</span>
02683 <span class="preprocessor"></span><span class="preprocessor">#if DOX==0</span>
02684 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_ARGCHECK &gt; 1</span>
02685 <span class="preprocessor"></span>    <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      magic;
02686 <span class="preprocessor">#endif</span>
02687 <span class="preprocessor"></span><span class="preprocessor">#if SYS_TASKDOUBLELINK != 0</span>
02688 <span class="preprocessor"></span>    <span class="keyword">struct </span>POSTASK  *prev;
02689 <span class="preprocessor">#endif</span>
02690 <span class="preprocessor"></span>    <span class="keyword">struct </span>POSTASK  *next;
02691     <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      bit_x;
02692 <span class="preprocessor">#if SYS_TASKTABSIZE_Y &gt; 1</span>
02693 <span class="preprocessor"></span>    <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      bit_y;
02694     <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      idx_y;
02695 <span class="preprocessor">#endif</span>
02696 <span class="preprocessor"></span>    <a class="code" href="picoos_8h.html#a48">UINT_t</a>      ticks;
02697 <span class="preprocessor">#if SYS_TASKSTATE != 0</span>
02698 <span class="preprocessor"></span>    <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      state;
02699 <span class="preprocessor">#endif</span>
02700 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_ERRNO != 0</span>
02701 <span class="preprocessor"></span>    <a class="code" href="picoos_8h.html#a45">VAR_t</a>       error;
02702 <span class="preprocessor">#endif</span>
02703 <span class="preprocessor"></span><span class="preprocessor">#if POSCFG_FEATURE_MSGBOXES != 0</span>
02704 <span class="preprocessor"></span>    <a class="code" href="picoos_8h.html#a46">UVAR_t</a>      msgwait;
02705     <a class="code" href="picoos_8h.html#a55">POSSEMA_t</a>   msgsem;
02706     <span class="keywordtype">void</span>        *firstmsg;
02707     <span class="keywordtype">void</span>        *lastmsg;
02708 <span class="preprocessor">#endif</span>
02709 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* !DOX */</span>
02710 };
02711 
02712 
02713 <span class="preprocessor">#endif </span><span class="comment">/* _PICOOS_H */</span>
02714 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 21 20:37:32 2004 for pico]OS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
