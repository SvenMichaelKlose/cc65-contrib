<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pico]OS: Bottom Halfs</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Bottom Halfs<br>
<small>
[<a class="el" href="group__userapin.html">User API: Nano Layer</a>]</small>
</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__bhalf.html#ga2">nosBottomHalfUnregister</a>(number)&nbsp;&nbsp;&nbsp;nosBottomHalfRegister(number, NULL, NULL)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="picoos_8h.html#a45">VAR_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__bhalf.html#ga0">nosBottomHalfRegister</a> (<a class="el" href="picoos_8h.html#a46">UVAR_t</a> number, <a class="el" href="pos__nano_8h.html#a9">NOSBHFUNC_t</a> func, void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__bhalf.html#ga1">nosBottomHalfStart</a> (<a class="el" href="picoos_8h.html#a46">UVAR_t</a> number)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<b> Note: This API is part of the nano layer </b><p>
Interrupt service routines can be divided into to halfs: the top and the bottom half. The top half is that piece of code, that is directly executed when the processor gets an hardware interrupt signalled. This code is usually executed with globally disabled interrupts. Thus, a second interrupt that happens while the first interrupt is still serviced, will be delayed until the processor has left the currently running ISR again. To minimize interrupt delay, only the critical part of the ISR (the top half) is executed at interrupt level, all non critical code is executed at task level (bottom half). Because the bottom half is interruptable, critical interrupts won't be delayed too much. <hr><h2>Define Documentation</h2>
<a class="anchor" name="ga2" doxytag="pos_nano.h::nosBottomHalfUnregister" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define nosBottomHalfUnregister</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">number&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;nosBottomHalfRegister(number, NULL, NULL)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bottom half function. Unregisters a bottom half. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>number</em>&nbsp;</td><td>Number of the bottom half to unregister. Must be between 0 and <a class="el" href="group__cfgnosbh.html#ga1">NOS_MAX_BOTTOMHALFS</a> - 1. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Zero on success. Nonzero values denote an error. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnosbh.html#ga0">NOSCFG_FEATURE_BOTTOMHALF</a> must be defined to 1 to enable bottom half support. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__bhalf.html#ga0">nosBottomHalfRegister</a> </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="pos_nano.h::nosBottomHalfRegister" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="picoos_8h.html#a45">VAR_t</a> nosBottomHalfRegister </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a46">UVAR_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="pos__nano_8h.html#a9">NOSBHFUNC_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>func</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>arg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bottom half function. Registers a new bottom half. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>number</em>&nbsp;</td><td>Number of the bottom half. Must be between 0 and <a class="el" href="group__cfgnosbh.html#ga1">NOS_MAX_BOTTOMHALFS</a> - 1. </td></tr>
    <tr><td valign=top><em>func</em>&nbsp;</td><td>pointer to the bottom half function that shall be executed when the bottom half is triggered. </td></tr>
    <tr><td valign=top><em>arg</em>&nbsp;</td><td>optional argument passed to function func. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Zero on success. Nonzero values denote an error. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>To unregister a bottom half function again, you may call this function with funcptr = NULL, or alternatively, you can use the macro <a class="el" href="group__bhalf.html#ga2">nosBottomHalfUnregister</a>. <br>
 <a class="el" href="group__cfgnosbh.html#ga0">NOSCFG_FEATURE_BOTTOMHALF</a> must be defined to 1 to enable bottom half support. <p>
Important! A bottom half function is not allowed to block, that means such a function must not call functions that may block (for example, this functions are posTaskSleep, posSemaGet, posSemaWait, posMutexLock). </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__bhalf.html#ga2">nosBottomHalfUnregister</a>, <a class="el" href="group__bhalf.html#ga1">nosBottomHalfStart</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="pos_nano.h::nosBottomHalfStart" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void nosBottomHalfStart </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="picoos_8h.html#a46">UVAR_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>number</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bottom half function. Triggers a bottom half function. The bottom half is executed when the interrupt level is left. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>number</em>&nbsp;</td><td>Number of the bottom half. Must be between 0 and <a class="el" href="group__cfgnosbh.html#ga1">NOS_MAX_BOTTOMHALFS</a> - 1. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd>This function is called by the top half of an interrupt service routine. Note that the ISR must be enclosured by a <a class="el" href="group__port.html#ga10">c_pos_intEnter</a> / <a class="el" href="group__port.html#ga11">c_pos_intExit</a> pair. <br>
 <a class="el" href="group__cfgnosbh.html#ga0">NOSCFG_FEATURE_BOTTOMHALF</a> must be defined to 1 to enable bottom half support. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__bhalf.html#ga0">nosBottomHalfRegister</a>, <a class="el" href="group__bhalf.html#ga2">nosBottomHalfUnregister</a> </dd></dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 21 20:37:32 2004 for pico]OS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
