<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pico]OS: Dynamic Memory Management</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Dynamic Memory Management<br>
<small>
[<a class="el" href="group__confign.html">Configuration: Nano Layer</a>]</small>
</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga2">NOSCFG_FEATURE_MEMALLOC</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga3">NOSCFG_MEM_MANAGER_TYPE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga4">NOSCFG_MEM_USER_MALLOC</a>&nbsp;&nbsp;&nbsp;mymalloc</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga5">NOSCFG_MEM_USER_FREE</a>&nbsp;&nbsp;&nbsp;myfree</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga6">NOSCFG_STKMEM_RESERVE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga7">NOSCFG_MEM_MANAGE_MODE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga8">NOSCFG_FEATURE_MEMSET</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga9">NOSCFG_FEATURE_MEMCOPY</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga0">__heap_start</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__cfgnosmem.html#ga1">__heap_end</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="ga2" doxytag="noscfg.h::NOSCFG_FEATURE_MEMALLOC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_FEATURE_MEMALLOC&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Include dynamic memory management functions. The nano layer supports an own implementation of the malloc() and free() memory functions, and it has a multitasking able framework for external memory functions. If this define is set to 1, the memory management functions will be compiled into the nano layer. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__cfgnosmem.html#ga3">NOSCFG_MEM_MANAGER_TYPE</a>, <a class="el" href="group__cfgnosmem.html#ga7">NOSCFG_MEM_MANAGE_MODE</a>, <a class="el" href="group__mem.html#ga0">nosMemAlloc</a>, <a class="el" href="group__mem.html#ga1">nosMemFree</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="noscfg.h::NOSCFG_FEATURE_MEMCOPY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_FEATURE_MEMCOPY&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Include function <a class="el" href="group__mem.html#ga3">nosMemCopy</a>. If this definition is set to 1, the function <a class="el" href="group__mem.html#ga3">nosMemCopy</a> will be included into the nano layer.     </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="noscfg.h::NOSCFG_FEATURE_MEMSET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_FEATURE_MEMSET&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Include function <a class="el" href="group__mem.html#ga2">nosMemSet</a>. If this definition is set to 1, the function <a class="el" href="group__mem.html#ga2">nosMemSet</a> will be included into the nano layer.     </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="noscfg.h::NOSCFG_MEM_MANAGE_MODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_MEM_MANAGE_MODE&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the working scheme of the internal nano layer memory allocator. <br>
 0 = very simple manager, low code size, but heap can fragment. <br>
 1 = low heap fragmentation, mem-free is slower than in mode 0, needs more code memory. <dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnosmem.html#ga3">NOSCFG_MEM_MANAGER_TYPE</a> must be set to type 1 to enable the internal memory allocator. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="noscfg.h::NOSCFG_MEM_MANAGER_TYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_MEM_MANAGER_TYPE&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set type of memory manager. Three types are possible: <br>
 0 = Use the malloc/free functions from the runtime library <br>
 1 = Use internal nano layer memory allocator. The system variables <a class="el" href="group__cfgnosmem.html#ga0">__heap_start</a> and <a class="el" href="group__cfgnosmem.html#ga1">__heap_end</a> must be provided and initialized by the user. See also define <a class="el" href="group__cfgnosmem.html#ga3">NOSCFG_MEM_MANAGER_TYPE</a>. <br>
 2 = The user supplys its own memory allocation routines. See defines <a class="el" href="group__cfgnosmem.html#ga4">NOSCFG_MEM_USER_MALLOC</a> and <a class="el" href="group__cfgnosmem.html#ga5">NOSCFG_MEM_USER_FREE</a>.     </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="noscfg.h::NOSCFG_MEM_USER_FREE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_MEM_USER_FREE&nbsp;&nbsp;&nbsp;myfree
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
User defined memory free function. The user may supply its own memory allocator functions. This define is set to the function name of the user's memory free function. <dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnosmem.html#ga3">NOSCFG_MEM_MANAGER_TYPE</a> must be set to type 2 to enable the use of a user supplied memory allocator. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="noscfg.h::NOSCFG_MEM_USER_MALLOC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_MEM_USER_MALLOC&nbsp;&nbsp;&nbsp;mymalloc
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
User defined memory allocation function. The user may supply its own memory allocator functions. This define is set to the function name of the user's memory allocation function. <dl compact><dt><b>Note:</b></dt><dd><a class="el" href="group__cfgnosmem.html#ga3">NOSCFG_MEM_MANAGER_TYPE</a> must be set to type 2 to enable the use of a user supplied memory allocator. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="noscfg.h::NOSCFG_STKMEM_RESERVE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOSCFG_STKMEM_RESERVE&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Number of bytes reserved in the stack frame for the memory allocator. If heap memory is used for stack memory at task creation, there can be an ugly side effect: When the task terminates again, and the RTOS frees the stack memory by calling a mem-free function, the memory allocator will chain the memory block into a list of free blocks (=&gt; memory pointers will be written to the top or bottom of the no more used stack frame). But the stack frame remains still active for a couple of subroutine jump backs, so the memory block is still modified even it is assumed to be unused. To avoid the corruption of memory pointers in the stack frame block, this define can be used to reserve some space for the memory allocator at the root of the stack frame. If the processor stack grows from top to bottom (most usual), the stack root is the highest memory location, and in most cases this define can be set to zero (= don't reserve any space).     </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="ga1" doxytag="noscfg.h::__heap_end" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void* <a class="el" href="group__cfgnosmem.html#ga1">__heap_end</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is a pointer to the end of the memory heap. It can either be a real variable pointing to the end of heap memory, or it can be a simple static constant define. It is recommended to let the linker generate a label with this name that points to the end of unused RAM memory.     </td>
  </tr>
</table>
<a class="anchor" name="ga0" doxytag="noscfg.h::__heap_start" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void* <a class="el" href="group__cfgnosmem.html#ga0">__heap_start</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is a pointer to the start of the memory heap. It can either be a real variable pointing to heap memory, or it can be a simple static constant define. It is recommended to let the linker generate a label with this name that points to the start of unused RAM memory.     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 21 20:37:33 2004 for pico]OS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
