<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pico]OS: Architecture / CPU Specific Settings</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Architecture / CPU Specific Settings<br>
<small>
[<a class="el" href="group__configp.html">Configuration: Pico Layer</a>]</small>
</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga0">MVAR_t</a>&nbsp;&nbsp;&nbsp;char</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga1">MVAR_BITS</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga2">MPTR_t</a>&nbsp;&nbsp;&nbsp;long</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga3">POSCFG_ALIGNMENT</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga4">POSCFG_ISR_INTERRUPTABLE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga5">HZ</a>&nbsp;&nbsp;&nbsp;18</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga6">POSCFG_TASKSTACKTYPE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga7">POSCFG_CALLINITARCH</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga8">POSCFG_DYNAMIC_MEMORY</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga9">POSCFG_DYNAMIC_REFILL</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__arch.html#ga10">POS_MEM_ALLOC</a>(bytes)&nbsp;&nbsp;&nbsp;nosMemAlloc(bytes)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="ga5" doxytag="port.h::HZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HZ&nbsp;&nbsp;&nbsp;18
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timer tick rate. This define must be set to the tickrate of the timer interrupt (= timer ticks per second).     </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="port.h::MPTR_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MPTR_t&nbsp;&nbsp;&nbsp;long
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Integer variable type used for memory pointers. This define must be set to an integer type that has the same bit width like a memory pointer (e.g. void*) on the target architecture. On a 32bit architecture you would usually define this to <em>long</em>, for a 8 bit architecture <em>short</em> would be sufficient.     </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="port.h::MVAR_BITS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MVAR_BITS&nbsp;&nbsp;&nbsp;8
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Machine variable width. This define tells the Operating System how much bits can be stored in the machine variable type <a class="el" href="group__arch.html#ga0">MVAR_t</a>. Some compilers support the sizeof(MVAR_t)-macro at this position, but some others don't. For example, set this define to 8 (bits) if <a class="el" href="group__arch.html#ga0">MVAR_t</a> is defined to <em>char</em>.     </td>
  </tr>
</table>
<a class="anchor" name="ga0" doxytag="port.h::MVAR_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MVAR_t&nbsp;&nbsp;&nbsp;char
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Machine variable type. This define is set to the variable type that best matches the target architecture. For example, define this to <em>char</em> if the architecture has 8 bit, or to <em>int</em> / <em>long</em> for a 32 bit architecture. Note that the variable must fit into a single memory cell of the target architecture. (For a 32 bit architecture you can define MVAR_t to <em>char</em>, <em>short</em> or <em>int</em> / <em>long</em>, whereas at a 8 bit architecure you can only define it to <em>char</em>). This define is responsible for the maximum count of tasks the operating system can manage. For example: <em>char</em> = 8 bit, 8 * 8 = 64 tasks; <em>long</em> = 32 bit, 32 * 32 = 1024 tasks.     </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="port.h::POS_MEM_ALLOC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POS_MEM_ALLOC</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bytes&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;nosMemAlloc(bytes)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Define optional memory allocation function. If <a class="el" href="group__arch.html#ga8">POSCFG_DYNAMIC_MEMORY</a> is set to 1, this definition must be set to a memory allocation function such as "malloc". The memory allocation function may not be reentrant when <a class="el" href="group__arch.html#ga9">POSCFG_DYNAMIC_REFILL</a> is set to 0, since the multitasking system is not yet started when the function is called.     </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="port.h::POSCFG_ALIGNMENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POSCFG_ALIGNMENT&nbsp;&nbsp;&nbsp;2
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Required memory alignment on the target CPU. To reach maximum speed, some architecures need correctly aligned memory patterns. Set this define to the memory alignment (in bytes) your architecture requires. Note that this value must be a power of 2. If your architecture does not require memory alignment, set this value to 0 or 1.     </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="port.h::POSCFG_CALLINITARCH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POSCFG_CALLINITARCH&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable call to function <a class="el" href="group__port.html#ga2">p_pos_initArch</a>. When this define is set to 1, the operating system will call the user supplied function <a class="el" href="group__port.html#ga2">p_pos_initArch</a> to initialize the architecture specific portion of the operating system.     </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="port.h::POSCFG_DYNAMIC_MEMORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POSCFG_DYNAMIC_MEMORY&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable dynamic memory. If this define is set to 1, the memory for internal data structures is allocated dynamically at startup. The define <a class="el" href="group__arch.html#ga10">POS_MEM_ALLOC</a> must be set to a memory allocation function that shall be used. Otherwise, when this define is set to 0, the memory is allocated statically.     </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="port.h::POSCFG_DYNAMIC_REFILL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POSCFG_DYNAMIC_REFILL&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Dynamic memory management. If this define is set to 1, the system will refill its volume of system structures for tasks, events, timers and messages when the user requests more structures than the amount that was preallocated (see defines <a class="el" href="group__coreset.html#ga2">POSCFG_MAX_TASKS</a>, <a class="el" href="group__coreset.html#ga3">POSCFG_MAX_EVENTS</a>, <a class="el" href="group__coreset.html#ga4">POSCFG_MAX_MESSAGES</a> and <a class="el" href="group__coreset.html#ga5">POSCFG_MAX_TIMER</a> ). To be able to use this feature, you must also set the define <a class="el" href="group__arch.html#ga8">POSCFG_DYNAMIC_MEMORY</a> to 1. But attention: The define <a class="el" href="group__arch.html#ga10">POS_MEM_ALLOC</a> must be set to a memory allocation function <b>that is thread save</b>. Please set the define <a class="el" href="group__arch.html#ga10">POS_MEM_ALLOC</a> to <a class="el" href="group__mem.html#ga0">nosMemAlloc</a> to use the nano layer memory allocator.     </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="port.h::POSCFG_ISR_INTERRUPTABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POSCFG_ISR_INTERRUPTABLE&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Interruptable interrupt service routines. This define must be set to 1 (=enabled) when an interrupt service routine is interruptable on the machine. E.g. some PowerPCs support critical interrupts that can interrupt currently running noncritical interrupts. If your machine configuration does not support interruptable ISRs, you can set this define to 0 to save some execution time in ISRs.     </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="port.h::POSCFG_TASKSTACKTYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define POSCFG_TASKSTACKTYPE&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the mechanism of stack memory handling. There are three types of stack memory handling defined.<br>
<p>
<b>Type 0 </b><br>
 The stack memory is allocated by the user and a pointer to the stack memory is passed to the functions <a class="el" href="group__task.html#ga6">posTaskCreate</a>, <a class="el" href="group__task.html#ga7">posInit</a> and <a class="el" href="group__port.html#ga6">p_pos_initTask</a>.<br>
<p>
<b>Type 1 </b><br>
 The stack memory will be allocated by the platform port when a new task is created. The memory will be freed when the task is destroyed. The functions <a class="el" href="group__task.html#ga6">posTaskCreate</a>, <a class="el" href="group__task.html#ga7">posInit</a> and <a class="el" href="group__port.html#ga6">p_pos_initTask</a> are called with a parameter that specifies the stack size. The function <a class="el" href="group__port.html#ga5">p_pos_freeStack</a> is used to free the stack memory again when the task is destroyed.<br>
<p>
<b>Type 2 </b><br>
 Like type 1, but the size of the stack is fixed. The functions <a class="el" href="group__task.html#ga6">posTaskCreate</a>, <a class="el" href="group__task.html#ga7">posInit</a> and <a class="el" href="group__port.html#ga6">p_pos_initTask</a> do not take any stack parameters.<br>
<p>
<dl compact><dt><b>Note:</b></dt><dd>the functions <a class="el" href="group__task.html#ga6">posTaskCreate</a>, <a class="el" href="group__task.html#ga7">posInit</a> and <a class="el" href="group__port.html#ga6">p_pos_initTask</a> have different prototypes for each stack handling type. </dd></dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 21 20:37:33 2004 for pico]OS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
